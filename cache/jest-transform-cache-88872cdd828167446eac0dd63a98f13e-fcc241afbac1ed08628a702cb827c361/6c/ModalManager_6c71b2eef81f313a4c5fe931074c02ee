79e7975c22e844f74e312cf6f49cdd83
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ModalManager = void 0;
exports.ariaHidden = ariaHidden;
var _utils = require("@mui/utils");
// Is a vertical scrollbar displayed?
function isOverflowing(container) {
  const doc = (0, _utils.unstable_ownerDocument)(container);
  if (doc.body === container) {
    return (0, _utils.unstable_ownerWindow)(container).innerWidth > doc.documentElement.clientWidth;
  }
  return container.scrollHeight > container.clientHeight;
}
function ariaHidden(element, show) {
  if (show) {
    element.setAttribute('aria-hidden', 'true');
  } else {
    element.removeAttribute('aria-hidden');
  }
}
function getPaddingRight(element) {
  return parseInt((0, _utils.unstable_ownerWindow)(element).getComputedStyle(element).paddingRight, 10) || 0;
}
function isAriaHiddenForbiddenOnElement(element) {
  // The forbidden HTML tags are the ones from ARIA specification that
  // can be children of body and can't have aria-hidden attribute.
  // cf. https://www.w3.org/TR/html-aria/#docconformance
  const forbiddenTagNames = ['TEMPLATE', 'SCRIPT', 'STYLE', 'LINK', 'MAP', 'META', 'NOSCRIPT', 'PICTURE', 'COL', 'COLGROUP', 'PARAM', 'SLOT', 'SOURCE', 'TRACK'];
  const isForbiddenTagName = forbiddenTagNames.indexOf(element.tagName) !== -1;
  const isInputHidden = element.tagName === 'INPUT' && element.getAttribute('type') === 'hidden';
  return isForbiddenTagName || isInputHidden;
}
function ariaHiddenSiblings(container, mountElement, currentElement, elementsToExclude, show) {
  const blacklist = [mountElement, currentElement, ...elementsToExclude];
  [].forEach.call(container.children, element => {
    const isNotExcludedElement = blacklist.indexOf(element) === -1;
    const isNotForbiddenElement = !isAriaHiddenForbiddenOnElement(element);
    if (isNotExcludedElement && isNotForbiddenElement) {
      ariaHidden(element, show);
    }
  });
}
function findIndexOf(items, callback) {
  let idx = -1;
  items.some((item, index) => {
    if (callback(item)) {
      idx = index;
      return true;
    }
    return false;
  });
  return idx;
}
function handleContainer(containerInfo, props) {
  const restoreStyle = [];
  const container = containerInfo.container;
  if (!props.disableScrollLock) {
    if (isOverflowing(container)) {
      // Compute the size before applying overflow hidden to avoid any scroll jumps.
      const scrollbarSize = (0, _utils.unstable_getScrollbarSize)((0, _utils.unstable_ownerDocument)(container));
      restoreStyle.push({
        value: container.style.paddingRight,
        property: 'padding-right',
        el: container
      });
      // Use computed style, here to get the real padding to add our scrollbar width.
      container.style.paddingRight = `${getPaddingRight(container) + scrollbarSize}px`;

      // .mui-fixed is a global helper.
      const fixedElements = (0, _utils.unstable_ownerDocument)(container).querySelectorAll('.mui-fixed');
      [].forEach.call(fixedElements, element => {
        restoreStyle.push({
          value: element.style.paddingRight,
          property: 'padding-right',
          el: element
        });
        element.style.paddingRight = `${getPaddingRight(element) + scrollbarSize}px`;
      });
    }
    let scrollContainer;
    if (container.parentNode instanceof DocumentFragment) {
      scrollContainer = (0, _utils.unstable_ownerDocument)(container).body;
    } else {
      // Improve Gatsby support
      // https://css-tricks.com/snippets/css/force-vertical-scrollbar/
      const parent = container.parentElement;
      const containerWindow = (0, _utils.unstable_ownerWindow)(container);
      scrollContainer = (parent == null ? void 0 : parent.nodeName) === 'HTML' && containerWindow.getComputedStyle(parent).overflowY === 'scroll' ? parent : container;
    }

    // Block the scroll even if no scrollbar is visible to account for mobile keyboard
    // screensize shrink.
    restoreStyle.push({
      value: scrollContainer.style.overflow,
      property: 'overflow',
      el: scrollContainer
    }, {
      value: scrollContainer.style.overflowX,
      property: 'overflow-x',
      el: scrollContainer
    }, {
      value: scrollContainer.style.overflowY,
      property: 'overflow-y',
      el: scrollContainer
    });
    scrollContainer.style.overflow = 'hidden';
  }
  const restore = () => {
    restoreStyle.forEach(({
      value,
      el,
      property
    }) => {
      if (value) {
        el.style.setProperty(property, value);
      } else {
        el.style.removeProperty(property);
      }
    });
  };
  return restore;
}
function getHiddenSiblings(container) {
  const hiddenSiblings = [];
  [].forEach.call(container.children, element => {
    if (element.getAttribute('aria-hidden') === 'true') {
      hiddenSiblings.push(element);
    }
  });
  return hiddenSiblings;
}
/**
 * @ignore - do not document.
 *
 * Proper state management for containers and the modals in those containers.
 * Simplified, but inspired by react-overlay's ModalManager class.
 * Used by the Modal to ensure proper styling of containers.
 */
class ModalManager {
  constructor() {
    this.containers = void 0;
    this.modals = void 0;
    this.modals = [];
    this.containers = [];
  }
  add(modal, container) {
    let modalIndex = this.modals.indexOf(modal);
    if (modalIndex !== -1) {
      return modalIndex;
    }
    modalIndex = this.modals.length;
    this.modals.push(modal);

    // If the modal we are adding is already in the DOM.
    if (modal.modalRef) {
      ariaHidden(modal.modalRef, false);
    }
    const hiddenSiblings = getHiddenSiblings(container);
    ariaHiddenSiblings(container, modal.mount, modal.modalRef, hiddenSiblings, true);
    const containerIndex = findIndexOf(this.containers, item => item.container === container);
    if (containerIndex !== -1) {
      this.containers[containerIndex].modals.push(modal);
      return modalIndex;
    }
    this.containers.push({
      modals: [modal],
      container,
      restore: null,
      hiddenSiblings
    });
    return modalIndex;
  }
  mount(modal, props) {
    const containerIndex = findIndexOf(this.containers, item => item.modals.indexOf(modal) !== -1);
    const containerInfo = this.containers[containerIndex];
    if (!containerInfo.restore) {
      containerInfo.restore = handleContainer(containerInfo, props);
    }
  }
  remove(modal, ariaHiddenState = true) {
    const modalIndex = this.modals.indexOf(modal);
    if (modalIndex === -1) {
      return modalIndex;
    }
    const containerIndex = findIndexOf(this.containers, item => item.modals.indexOf(modal) !== -1);
    const containerInfo = this.containers[containerIndex];
    containerInfo.modals.splice(containerInfo.modals.indexOf(modal), 1);
    this.modals.splice(modalIndex, 1);

    // If that was the last modal in a container, clean up the container.
    if (containerInfo.modals.length === 0) {
      // The modal might be closed before it had the chance to be mounted in the DOM.
      if (containerInfo.restore) {
        containerInfo.restore();
      }
      if (modal.modalRef) {
        // In case the modal wasn't in the DOM yet.
        ariaHidden(modal.modalRef, ariaHiddenState);
      }
      ariaHiddenSiblings(containerInfo.container, modal.mount, modal.modalRef, containerInfo.hiddenSiblings, false);
      this.containers.splice(containerIndex, 1);
    } else {
      // Otherwise make sure the next top modal is visible to a screen reader.
      const nextTop = containerInfo.modals[containerInfo.modals.length - 1];
      // as soon as a modal is adding its modalRef is undefined. it can't set
      // aria-hidden because the dom element doesn't exist either
      // when modal was unmounted before modalRef gets null
      if (nextTop.modalRef) {
        ariaHidden(nextTop.modalRef, false);
      }
    }
    return modalIndex;
  }
  isTopModal(modal) {
    return this.modals.length > 0 && this.modals[this.modals.length - 1] === modal;
  }
}
exports.ModalManager = ModalManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vZGFsTWFuYWdlciIsImFyaWFIaWRkZW4iLCJfdXRpbHMiLCJyZXF1aXJlIiwiaXNPdmVyZmxvd2luZyIsImNvbnRhaW5lciIsImRvYyIsInVuc3RhYmxlX293bmVyRG9jdW1lbnQiLCJib2R5IiwidW5zdGFibGVfb3duZXJXaW5kb3ciLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJlbGVtZW50Iiwic2hvdyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImdldFBhZGRpbmdSaWdodCIsInBhcnNlSW50IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhZGRpbmdSaWdodCIsImlzQXJpYUhpZGRlbkZvcmJpZGRlbk9uRWxlbWVudCIsImZvcmJpZGRlblRhZ05hbWVzIiwiaXNGb3JiaWRkZW5UYWdOYW1lIiwiaW5kZXhPZiIsInRhZ05hbWUiLCJpc0lucHV0SGlkZGVuIiwiZ2V0QXR0cmlidXRlIiwiYXJpYUhpZGRlblNpYmxpbmdzIiwibW91bnRFbGVtZW50IiwiY3VycmVudEVsZW1lbnQiLCJlbGVtZW50c1RvRXhjbHVkZSIsImJsYWNrbGlzdCIsImZvckVhY2giLCJjYWxsIiwiY2hpbGRyZW4iLCJpc05vdEV4Y2x1ZGVkRWxlbWVudCIsImlzTm90Rm9yYmlkZGVuRWxlbWVudCIsImZpbmRJbmRleE9mIiwiaXRlbXMiLCJjYWxsYmFjayIsImlkeCIsInNvbWUiLCJpdGVtIiwiaW5kZXgiLCJoYW5kbGVDb250YWluZXIiLCJjb250YWluZXJJbmZvIiwicHJvcHMiLCJyZXN0b3JlU3R5bGUiLCJkaXNhYmxlU2Nyb2xsTG9jayIsInNjcm9sbGJhclNpemUiLCJ1bnN0YWJsZV9nZXRTY3JvbGxiYXJTaXplIiwicHVzaCIsInN0eWxlIiwicHJvcGVydHkiLCJlbCIsImZpeGVkRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2Nyb2xsQ29udGFpbmVyIiwicGFyZW50Tm9kZSIsIkRvY3VtZW50RnJhZ21lbnQiLCJwYXJlbnQiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbmVyV2luZG93Iiwibm9kZU5hbWUiLCJvdmVyZmxvd1kiLCJvdmVyZmxvdyIsIm92ZXJmbG93WCIsInJlc3RvcmUiLCJzZXRQcm9wZXJ0eSIsInJlbW92ZVByb3BlcnR5IiwiZ2V0SGlkZGVuU2libGluZ3MiLCJoaWRkZW5TaWJsaW5ncyIsImNvbnN0cnVjdG9yIiwiY29udGFpbmVycyIsIm1vZGFscyIsImFkZCIsIm1vZGFsIiwibW9kYWxJbmRleCIsImxlbmd0aCIsIm1vZGFsUmVmIiwibW91bnQiLCJjb250YWluZXJJbmRleCIsInJlbW92ZSIsImFyaWFIaWRkZW5TdGF0ZSIsInNwbGljZSIsIm5leHRUb3AiLCJpc1RvcE1vZGFsIl0sInNvdXJjZXMiOlsiTW9kYWxNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5Nb2RhbE1hbmFnZXIgPSB2b2lkIDA7XG5leHBvcnRzLmFyaWFIaWRkZW4gPSBhcmlhSGlkZGVuO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCJAbXVpL3V0aWxzXCIpO1xuLy8gSXMgYSB2ZXJ0aWNhbCBzY3JvbGxiYXIgZGlzcGxheWVkP1xuZnVuY3Rpb24gaXNPdmVyZmxvd2luZyhjb250YWluZXIpIHtcbiAgY29uc3QgZG9jID0gKDAsIF91dGlscy51bnN0YWJsZV9vd25lckRvY3VtZW50KShjb250YWluZXIpO1xuICBpZiAoZG9jLmJvZHkgPT09IGNvbnRhaW5lcikge1xuICAgIHJldHVybiAoMCwgX3V0aWxzLnVuc3RhYmxlX293bmVyV2luZG93KShjb250YWluZXIpLmlubmVyV2lkdGggPiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICB9XG4gIHJldHVybiBjb250YWluZXIuc2Nyb2xsSGVpZ2h0ID4gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbn1cbmZ1bmN0aW9uIGFyaWFIaWRkZW4oZWxlbWVudCwgc2hvdykge1xuICBpZiAoc2hvdykge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gIH0gZWxzZSB7XG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFBhZGRpbmdSaWdodChlbGVtZW50KSB7XG4gIHJldHVybiBwYXJzZUludCgoMCwgX3V0aWxzLnVuc3RhYmxlX293bmVyV2luZG93KShlbGVtZW50KS5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBhZGRpbmdSaWdodCwgMTApIHx8IDA7XG59XG5mdW5jdGlvbiBpc0FyaWFIaWRkZW5Gb3JiaWRkZW5PbkVsZW1lbnQoZWxlbWVudCkge1xuICAvLyBUaGUgZm9yYmlkZGVuIEhUTUwgdGFncyBhcmUgdGhlIG9uZXMgZnJvbSBBUklBIHNwZWNpZmljYXRpb24gdGhhdFxuICAvLyBjYW4gYmUgY2hpbGRyZW4gb2YgYm9keSBhbmQgY2FuJ3QgaGF2ZSBhcmlhLWhpZGRlbiBhdHRyaWJ1dGUuXG4gIC8vIGNmLiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbC1hcmlhLyNkb2Njb25mb3JtYW5jZVxuICBjb25zdCBmb3JiaWRkZW5UYWdOYW1lcyA9IFsnVEVNUExBVEUnLCAnU0NSSVBUJywgJ1NUWUxFJywgJ0xJTksnLCAnTUFQJywgJ01FVEEnLCAnTk9TQ1JJUFQnLCAnUElDVFVSRScsICdDT0wnLCAnQ09MR1JPVVAnLCAnUEFSQU0nLCAnU0xPVCcsICdTT1VSQ0UnLCAnVFJBQ0snXTtcbiAgY29uc3QgaXNGb3JiaWRkZW5UYWdOYW1lID0gZm9yYmlkZGVuVGFnTmFtZXMuaW5kZXhPZihlbGVtZW50LnRhZ05hbWUpICE9PSAtMTtcbiAgY29uc3QgaXNJbnB1dEhpZGRlbiA9IGVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAnaGlkZGVuJztcbiAgcmV0dXJuIGlzRm9yYmlkZGVuVGFnTmFtZSB8fCBpc0lucHV0SGlkZGVuO1xufVxuZnVuY3Rpb24gYXJpYUhpZGRlblNpYmxpbmdzKGNvbnRhaW5lciwgbW91bnRFbGVtZW50LCBjdXJyZW50RWxlbWVudCwgZWxlbWVudHNUb0V4Y2x1ZGUsIHNob3cpIHtcbiAgY29uc3QgYmxhY2tsaXN0ID0gW21vdW50RWxlbWVudCwgY3VycmVudEVsZW1lbnQsIC4uLmVsZW1lbnRzVG9FeGNsdWRlXTtcbiAgW10uZm9yRWFjaC5jYWxsKGNvbnRhaW5lci5jaGlsZHJlbiwgZWxlbWVudCA9PiB7XG4gICAgY29uc3QgaXNOb3RFeGNsdWRlZEVsZW1lbnQgPSBibGFja2xpc3QuaW5kZXhPZihlbGVtZW50KSA9PT0gLTE7XG4gICAgY29uc3QgaXNOb3RGb3JiaWRkZW5FbGVtZW50ID0gIWlzQXJpYUhpZGRlbkZvcmJpZGRlbk9uRWxlbWVudChlbGVtZW50KTtcbiAgICBpZiAoaXNOb3RFeGNsdWRlZEVsZW1lbnQgJiYgaXNOb3RGb3JiaWRkZW5FbGVtZW50KSB7XG4gICAgICBhcmlhSGlkZGVuKGVsZW1lbnQsIHNob3cpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBmaW5kSW5kZXhPZihpdGVtcywgY2FsbGJhY2spIHtcbiAgbGV0IGlkeCA9IC0xO1xuICBpdGVtcy5zb21lKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmIChjYWxsYmFjayhpdGVtKSkge1xuICAgICAgaWR4ID0gaW5kZXg7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbiAgcmV0dXJuIGlkeDtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNvbnRhaW5lcihjb250YWluZXJJbmZvLCBwcm9wcykge1xuICBjb25zdCByZXN0b3JlU3R5bGUgPSBbXTtcbiAgY29uc3QgY29udGFpbmVyID0gY29udGFpbmVySW5mby5jb250YWluZXI7XG4gIGlmICghcHJvcHMuZGlzYWJsZVNjcm9sbExvY2spIHtcbiAgICBpZiAoaXNPdmVyZmxvd2luZyhjb250YWluZXIpKSB7XG4gICAgICAvLyBDb21wdXRlIHRoZSBzaXplIGJlZm9yZSBhcHBseWluZyBvdmVyZmxvdyBoaWRkZW4gdG8gYXZvaWQgYW55IHNjcm9sbCBqdW1wcy5cbiAgICAgIGNvbnN0IHNjcm9sbGJhclNpemUgPSAoMCwgX3V0aWxzLnVuc3RhYmxlX2dldFNjcm9sbGJhclNpemUpKCgwLCBfdXRpbHMudW5zdGFibGVfb3duZXJEb2N1bWVudCkoY29udGFpbmVyKSk7XG4gICAgICByZXN0b3JlU3R5bGUucHVzaCh7XG4gICAgICAgIHZhbHVlOiBjb250YWluZXIuc3R5bGUucGFkZGluZ1JpZ2h0LFxuICAgICAgICBwcm9wZXJ0eTogJ3BhZGRpbmctcmlnaHQnLFxuICAgICAgICBlbDogY29udGFpbmVyXG4gICAgICB9KTtcbiAgICAgIC8vIFVzZSBjb21wdXRlZCBzdHlsZSwgaGVyZSB0byBnZXQgdGhlIHJlYWwgcGFkZGluZyB0byBhZGQgb3VyIHNjcm9sbGJhciB3aWR0aC5cbiAgICAgIGNvbnRhaW5lci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtnZXRQYWRkaW5nUmlnaHQoY29udGFpbmVyKSArIHNjcm9sbGJhclNpemV9cHhgO1xuXG4gICAgICAvLyAubXVpLWZpeGVkIGlzIGEgZ2xvYmFsIGhlbHBlci5cbiAgICAgIGNvbnN0IGZpeGVkRWxlbWVudHMgPSAoMCwgX3V0aWxzLnVuc3RhYmxlX293bmVyRG9jdW1lbnQpKGNvbnRhaW5lcikucXVlcnlTZWxlY3RvckFsbCgnLm11aS1maXhlZCcpO1xuICAgICAgW10uZm9yRWFjaC5jYWxsKGZpeGVkRWxlbWVudHMsIGVsZW1lbnQgPT4ge1xuICAgICAgICByZXN0b3JlU3R5bGUucHVzaCh7XG4gICAgICAgICAgdmFsdWU6IGVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0LFxuICAgICAgICAgIHByb3BlcnR5OiAncGFkZGluZy1yaWdodCcsXG4gICAgICAgICAgZWw6IGVsZW1lbnRcbiAgICAgICAgfSk7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7Z2V0UGFkZGluZ1JpZ2h0KGVsZW1lbnQpICsgc2Nyb2xsYmFyU2l6ZX1weGA7XG4gICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHNjcm9sbENvbnRhaW5lcjtcbiAgICBpZiAoY29udGFpbmVyLnBhcmVudE5vZGUgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgICBzY3JvbGxDb250YWluZXIgPSAoMCwgX3V0aWxzLnVuc3RhYmxlX293bmVyRG9jdW1lbnQpKGNvbnRhaW5lcikuYm9keTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSW1wcm92ZSBHYXRzYnkgc3VwcG9ydFxuICAgICAgLy8gaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9jc3MvZm9yY2UtdmVydGljYWwtc2Nyb2xsYmFyL1xuICAgICAgY29uc3QgcGFyZW50ID0gY29udGFpbmVyLnBhcmVudEVsZW1lbnQ7XG4gICAgICBjb25zdCBjb250YWluZXJXaW5kb3cgPSAoMCwgX3V0aWxzLnVuc3RhYmxlX293bmVyV2luZG93KShjb250YWluZXIpO1xuICAgICAgc2Nyb2xsQ29udGFpbmVyID0gKHBhcmVudCA9PSBudWxsID8gdm9pZCAwIDogcGFyZW50Lm5vZGVOYW1lKSA9PT0gJ0hUTUwnICYmIGNvbnRhaW5lcldpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCkub3ZlcmZsb3dZID09PSAnc2Nyb2xsJyA/IHBhcmVudCA6IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICAvLyBCbG9jayB0aGUgc2Nyb2xsIGV2ZW4gaWYgbm8gc2Nyb2xsYmFyIGlzIHZpc2libGUgdG8gYWNjb3VudCBmb3IgbW9iaWxlIGtleWJvYXJkXG4gICAgLy8gc2NyZWVuc2l6ZSBzaHJpbmsuXG4gICAgcmVzdG9yZVN0eWxlLnB1c2goe1xuICAgICAgdmFsdWU6IHNjcm9sbENvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyxcbiAgICAgIHByb3BlcnR5OiAnb3ZlcmZsb3cnLFxuICAgICAgZWw6IHNjcm9sbENvbnRhaW5lclxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBzY3JvbGxDb250YWluZXIuc3R5bGUub3ZlcmZsb3dYLFxuICAgICAgcHJvcGVydHk6ICdvdmVyZmxvdy14JyxcbiAgICAgIGVsOiBzY3JvbGxDb250YWluZXJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogc2Nyb2xsQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93WSxcbiAgICAgIHByb3BlcnR5OiAnb3ZlcmZsb3cteScsXG4gICAgICBlbDogc2Nyb2xsQ29udGFpbmVyXG4gICAgfSk7XG4gICAgc2Nyb2xsQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gIH1cbiAgY29uc3QgcmVzdG9yZSA9ICgpID0+IHtcbiAgICByZXN0b3JlU3R5bGUuZm9yRWFjaCgoe1xuICAgICAgdmFsdWUsXG4gICAgICBlbCxcbiAgICAgIHByb3BlcnR5XG4gICAgfSkgPT4ge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wZXJ0eSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiByZXN0b3JlO1xufVxuZnVuY3Rpb24gZ2V0SGlkZGVuU2libGluZ3MoY29udGFpbmVyKSB7XG4gIGNvbnN0IGhpZGRlblNpYmxpbmdzID0gW107XG4gIFtdLmZvckVhY2guY2FsbChjb250YWluZXIuY2hpbGRyZW4sIGVsZW1lbnQgPT4ge1xuICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSA9PT0gJ3RydWUnKSB7XG4gICAgICBoaWRkZW5TaWJsaW5ncy5wdXNoKGVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBoaWRkZW5TaWJsaW5ncztcbn1cbi8qKlxuICogQGlnbm9yZSAtIGRvIG5vdCBkb2N1bWVudC5cbiAqXG4gKiBQcm9wZXIgc3RhdGUgbWFuYWdlbWVudCBmb3IgY29udGFpbmVycyBhbmQgdGhlIG1vZGFscyBpbiB0aG9zZSBjb250YWluZXJzLlxuICogU2ltcGxpZmllZCwgYnV0IGluc3BpcmVkIGJ5IHJlYWN0LW92ZXJsYXkncyBNb2RhbE1hbmFnZXIgY2xhc3MuXG4gKiBVc2VkIGJ5IHRoZSBNb2RhbCB0byBlbnN1cmUgcHJvcGVyIHN0eWxpbmcgb2YgY29udGFpbmVycy5cbiAqL1xuY2xhc3MgTW9kYWxNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXJzID0gdm9pZCAwO1xuICAgIHRoaXMubW9kYWxzID0gdm9pZCAwO1xuICAgIHRoaXMubW9kYWxzID0gW107XG4gICAgdGhpcy5jb250YWluZXJzID0gW107XG4gIH1cbiAgYWRkKG1vZGFsLCBjb250YWluZXIpIHtcbiAgICBsZXQgbW9kYWxJbmRleCA9IHRoaXMubW9kYWxzLmluZGV4T2YobW9kYWwpO1xuICAgIGlmIChtb2RhbEluZGV4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIG1vZGFsSW5kZXg7XG4gICAgfVxuICAgIG1vZGFsSW5kZXggPSB0aGlzLm1vZGFscy5sZW5ndGg7XG4gICAgdGhpcy5tb2RhbHMucHVzaChtb2RhbCk7XG5cbiAgICAvLyBJZiB0aGUgbW9kYWwgd2UgYXJlIGFkZGluZyBpcyBhbHJlYWR5IGluIHRoZSBET00uXG4gICAgaWYgKG1vZGFsLm1vZGFsUmVmKSB7XG4gICAgICBhcmlhSGlkZGVuKG1vZGFsLm1vZGFsUmVmLCBmYWxzZSk7XG4gICAgfVxuICAgIGNvbnN0IGhpZGRlblNpYmxpbmdzID0gZ2V0SGlkZGVuU2libGluZ3MoY29udGFpbmVyKTtcbiAgICBhcmlhSGlkZGVuU2libGluZ3MoY29udGFpbmVyLCBtb2RhbC5tb3VudCwgbW9kYWwubW9kYWxSZWYsIGhpZGRlblNpYmxpbmdzLCB0cnVlKTtcbiAgICBjb25zdCBjb250YWluZXJJbmRleCA9IGZpbmRJbmRleE9mKHRoaXMuY29udGFpbmVycywgaXRlbSA9PiBpdGVtLmNvbnRhaW5lciA9PT0gY29udGFpbmVyKTtcbiAgICBpZiAoY29udGFpbmVySW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lcnNbY29udGFpbmVySW5kZXhdLm1vZGFscy5wdXNoKG1vZGFsKTtcbiAgICAgIHJldHVybiBtb2RhbEluZGV4O1xuICAgIH1cbiAgICB0aGlzLmNvbnRhaW5lcnMucHVzaCh7XG4gICAgICBtb2RhbHM6IFttb2RhbF0sXG4gICAgICBjb250YWluZXIsXG4gICAgICByZXN0b3JlOiBudWxsLFxuICAgICAgaGlkZGVuU2libGluZ3NcbiAgICB9KTtcbiAgICByZXR1cm4gbW9kYWxJbmRleDtcbiAgfVxuICBtb3VudChtb2RhbCwgcHJvcHMpIHtcbiAgICBjb25zdCBjb250YWluZXJJbmRleCA9IGZpbmRJbmRleE9mKHRoaXMuY29udGFpbmVycywgaXRlbSA9PiBpdGVtLm1vZGFscy5pbmRleE9mKG1vZGFsKSAhPT0gLTEpO1xuICAgIGNvbnN0IGNvbnRhaW5lckluZm8gPSB0aGlzLmNvbnRhaW5lcnNbY29udGFpbmVySW5kZXhdO1xuICAgIGlmICghY29udGFpbmVySW5mby5yZXN0b3JlKSB7XG4gICAgICBjb250YWluZXJJbmZvLnJlc3RvcmUgPSBoYW5kbGVDb250YWluZXIoY29udGFpbmVySW5mbywgcHJvcHMpO1xuICAgIH1cbiAgfVxuICByZW1vdmUobW9kYWwsIGFyaWFIaWRkZW5TdGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBtb2RhbEluZGV4ID0gdGhpcy5tb2RhbHMuaW5kZXhPZihtb2RhbCk7XG4gICAgaWYgKG1vZGFsSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gbW9kYWxJbmRleDtcbiAgICB9XG4gICAgY29uc3QgY29udGFpbmVySW5kZXggPSBmaW5kSW5kZXhPZih0aGlzLmNvbnRhaW5lcnMsIGl0ZW0gPT4gaXRlbS5tb2RhbHMuaW5kZXhPZihtb2RhbCkgIT09IC0xKTtcbiAgICBjb25zdCBjb250YWluZXJJbmZvID0gdGhpcy5jb250YWluZXJzW2NvbnRhaW5lckluZGV4XTtcbiAgICBjb250YWluZXJJbmZvLm1vZGFscy5zcGxpY2UoY29udGFpbmVySW5mby5tb2RhbHMuaW5kZXhPZihtb2RhbCksIDEpO1xuICAgIHRoaXMubW9kYWxzLnNwbGljZShtb2RhbEluZGV4LCAxKTtcblxuICAgIC8vIElmIHRoYXQgd2FzIHRoZSBsYXN0IG1vZGFsIGluIGEgY29udGFpbmVyLCBjbGVhbiB1cCB0aGUgY29udGFpbmVyLlxuICAgIGlmIChjb250YWluZXJJbmZvLm1vZGFscy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFRoZSBtb2RhbCBtaWdodCBiZSBjbG9zZWQgYmVmb3JlIGl0IGhhZCB0aGUgY2hhbmNlIHRvIGJlIG1vdW50ZWQgaW4gdGhlIERPTS5cbiAgICAgIGlmIChjb250YWluZXJJbmZvLnJlc3RvcmUpIHtcbiAgICAgICAgY29udGFpbmVySW5mby5yZXN0b3JlKCk7XG4gICAgICB9XG4gICAgICBpZiAobW9kYWwubW9kYWxSZWYpIHtcbiAgICAgICAgLy8gSW4gY2FzZSB0aGUgbW9kYWwgd2Fzbid0IGluIHRoZSBET00geWV0LlxuICAgICAgICBhcmlhSGlkZGVuKG1vZGFsLm1vZGFsUmVmLCBhcmlhSGlkZGVuU3RhdGUpO1xuICAgICAgfVxuICAgICAgYXJpYUhpZGRlblNpYmxpbmdzKGNvbnRhaW5lckluZm8uY29udGFpbmVyLCBtb2RhbC5tb3VudCwgbW9kYWwubW9kYWxSZWYsIGNvbnRhaW5lckluZm8uaGlkZGVuU2libGluZ3MsIGZhbHNlKTtcbiAgICAgIHRoaXMuY29udGFpbmVycy5zcGxpY2UoY29udGFpbmVySW5kZXgsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdGhlcndpc2UgbWFrZSBzdXJlIHRoZSBuZXh0IHRvcCBtb2RhbCBpcyB2aXNpYmxlIHRvIGEgc2NyZWVuIHJlYWRlci5cbiAgICAgIGNvbnN0IG5leHRUb3AgPSBjb250YWluZXJJbmZvLm1vZGFsc1tjb250YWluZXJJbmZvLm1vZGFscy5sZW5ndGggLSAxXTtcbiAgICAgIC8vIGFzIHNvb24gYXMgYSBtb2RhbCBpcyBhZGRpbmcgaXRzIG1vZGFsUmVmIGlzIHVuZGVmaW5lZC4gaXQgY2FuJ3Qgc2V0XG4gICAgICAvLyBhcmlhLWhpZGRlbiBiZWNhdXNlIHRoZSBkb20gZWxlbWVudCBkb2Vzbid0IGV4aXN0IGVpdGhlclxuICAgICAgLy8gd2hlbiBtb2RhbCB3YXMgdW5tb3VudGVkIGJlZm9yZSBtb2RhbFJlZiBnZXRzIG51bGxcbiAgICAgIGlmIChuZXh0VG9wLm1vZGFsUmVmKSB7XG4gICAgICAgIGFyaWFIaWRkZW4obmV4dFRvcC5tb2RhbFJlZiwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbW9kYWxJbmRleDtcbiAgfVxuICBpc1RvcE1vZGFsKG1vZGFsKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kYWxzLmxlbmd0aCA+IDAgJiYgdGhpcy5tb2RhbHNbdGhpcy5tb2RhbHMubGVuZ3RoIC0gMV0gPT09IG1vZGFsO1xuICB9XG59XG5leHBvcnRzLk1vZGFsTWFuYWdlciA9IE1vZGFsTWFuYWdlcjsiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVpBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxZQUFZLEdBQUcsS0FBSyxDQUFDO0FBQzdCRixPQUFPLENBQUNHLFVBQVUsR0FBR0EsVUFBVTtBQUMvQixJQUFJQyxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDbEM7QUFDQSxTQUFTQyxhQUFhQSxDQUFDQyxTQUFTLEVBQUU7RUFD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