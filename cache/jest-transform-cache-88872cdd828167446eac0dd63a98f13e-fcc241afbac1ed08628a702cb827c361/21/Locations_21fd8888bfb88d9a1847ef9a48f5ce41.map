{"version":3,"names":["_react","_interopRequireWildcard","require","_axios","_interopRequireDefault","_reactRedux","_locationSlice","_material","_reactRouterDom","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Locations","location","setLocation","useState","currentLocation","useSelector","state","locationList","previousLocations","navigation","useNavigate","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","dispatch","useDispatch","presentAddress","setPresent","useEffect","options","enableHighAccuracy","timeout","maximumAge","currentAddress","fetchLocation","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","axios","then","response","address","data","results","formatted_address","dateTime","Date","toLocaleString","setCurrentLocation","catch","error","console","log","intervalId","setInterval","addPreviousLocation","clearInterval","handleClearAll","clearPreviousLocations","handleRemoveLocation","index","removePreviousLocation","handleNavigation","lat","lng","createElement","className","Typography","variant","gutterBottom","Box","onClick","sx","cursor","p","border","borderRadius","borderColor","textAlign","fontWeight","Button","color","mt","length","display","flexDirection","gap","slice","reverse","map","height","_default","exports"],"sources":["Locations.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  setCurrentLocation,\r\n  addPreviousLocation,\r\n  clearPreviousLocations,\r\n  removePreviousLocation,\r\n} from \"./reducers/reducer/locationSlice\";\r\nimport { Box, Button, Typography } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface Location {\r\n  latitude: number;\r\n  longitude: number;\r\n}\r\n\r\ninterface Position {\r\n  coords: {\r\n    latitude: number;\r\n    longitude: number;\r\n  };\r\n}\r\n\r\ninterface PositionError {\r\n  message: string;\r\n  code: number;\r\n}\r\n\r\nconst Locations = () => {\r\n  const [location, setLocation] = useState<Location | null>(null);\r\n  const currentLocation = useSelector(\r\n    (state: any) => state.locationList.currentLocation\r\n  );\r\n  const previousLocations = useSelector(\r\n    (state: any) => state.locationList.previousLocations\r\n  );\r\n  const navigation = useNavigate();\r\n  const key = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\r\n  const dispatch = useDispatch();\r\n  const [presentAddress, setPresent] = useState<any>();\r\n  useEffect(() => {\r\n    const options = {\r\n      enableHighAccuracy: true,\r\n      timeout: 5000,\r\n      maximumAge: 0,\r\n    };\r\n    let currentAddress: any = null;\r\n    const fetchLocation = () => {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position: Position) => {\r\n          const { latitude, longitude } = position.coords;\r\n          setLocation({ latitude, longitude });\r\n          axios\r\n            .get(\r\n              `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=${key}`\r\n            )\r\n            .then((response) => {\r\n              const address = response.data.results[0].formatted_address;\r\n              const dateTime = new Date().toLocaleString();\r\n              dispatch(\r\n                setCurrentLocation({ address, latitude, longitude, dateTime })\r\n              );\r\n              currentAddress = { address, latitude, longitude, dateTime };\r\n\r\n              setPresent(currentAddress);\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n            });\r\n        },\r\n        (error: PositionError) => {\r\n          console.log(error);\r\n        },\r\n        options\r\n      );\r\n    };\r\n\r\n    fetchLocation();\r\n    const intervalId = setInterval(() => {\r\n      dispatch(addPreviousLocation(currentAddress));\r\n      fetchLocation();\r\n    }, 300000);\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n  const handleClearAll = () => {\r\n    dispatch(clearPreviousLocations());\r\n  };\r\n  const handleRemoveLocation = (index: number) => {\r\n    dispatch(removePreviousLocation(index));\r\n  };\r\n  const handleNavigation = (location: any) => {\r\n    navigation(\"/map\", {\r\n      state: {\r\n        address: location.address,\r\n        lat: location.latitude,\r\n        lng: location.longitude,\r\n      },\r\n    });\r\n  };\r\n  //console.log(currentLocation);\r\n  return (\r\n    <div className=\"locationsContainer\" data-testid=\"location-container\">\r\n      {location ? (\r\n        <div className=\"addresses\">\r\n          <Typography variant=\"h4\" gutterBottom>\r\n            Current Location\r\n          </Typography>\r\n          <Box\r\n            onClick={() => handleNavigation(currentLocation)}\r\n            sx={{\r\n              cursor: \"pointer\",\r\n              p: 1.5,\r\n              \"&:hover\": {\r\n                border: 1,\r\n                borderRadius: 2,\r\n                borderColor: \"divider\",\r\n                p: 1.5,\r\n              },\r\n            }}\r\n          >\r\n            {currentLocation && (\r\n              <Box sx={{ textAlign: \"left\" }}>\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  gutterBottom\r\n                  sx={{ fontWeight: \"bold\" }}\r\n                >\r\n                  {currentLocation.address}\r\n                </Typography>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  {currentLocation.dateTime}\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            className=\"clearBtn\"\r\n            variant=\"contained\"\r\n            color=\"success\"\r\n            onClick={handleClearAll}\r\n            sx={{ mt: 1 }}\r\n          >\r\n            Clear All Locations\r\n          </Button>\r\n\r\n          {previousLocations.length > 0 && (\r\n            <div className=\"previousLocations\">\r\n              <Typography variant=\"subtitle1\">Previous Addresses:</Typography>\r\n              <Box\r\n                sx={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  gap: 2,\r\n                  p: 1,\r\n                  border: 1,\r\n                  borderRadius: 2,\r\n                  borderColor: \"divider\",\r\n                  textAlign: \"left\",\r\n                }}\r\n                data-testid=\"previous-locations\"\r\n              >\r\n                {previousLocations\r\n                  .slice()\r\n                  .reverse()\r\n                  .map((location: any, index: number) => (\r\n                    <Box\r\n                      key={index}\r\n                      sx={{\r\n                        display: \"flex\",\r\n                        gap: 2,\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                    >\r\n                      <Box\r\n                        onClick={() => handleNavigation(location)}\r\n                        sx={{\r\n                          \"&:hover\": {\r\n                            border: 1,\r\n                            borderRadius: 2,\r\n                            borderColor: \"divider\",\r\n                          },\r\n                          p: 1,\r\n                        }}\r\n                      >\r\n                        <Typography\r\n                          sx={{ fontWeight: \"bold\" }}\r\n                          data-testid={`previous-location-${index + 1}`}\r\n                        >\r\n                          {location?.address}\r\n                        </Typography>\r\n                        <Typography data-testid={`previous-time-${index + 1}`}>\r\n                          {location.dateTime}\r\n                        </Typography>\r\n                      </Box>\r\n                      <Button\r\n                        className=\"removeBtn\"\r\n                        sx={{ height: \"80%\", mt: 1.5 }}\r\n                        variant=\"contained\"\r\n                        color=\"success\"\r\n                        onClick={() => handleRemoveLocation(index)}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                    </Box>\r\n                  ))}\r\n              </Box>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <p>Loading current location...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Locations;\r\n"],"mappings":"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"}