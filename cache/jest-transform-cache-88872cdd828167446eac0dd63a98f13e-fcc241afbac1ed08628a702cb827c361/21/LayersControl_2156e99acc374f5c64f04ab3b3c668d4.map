{"version":3,"names":["_core","require","_leaflet","_react","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","useLayersControlElement","createElementHook","createLayersControl","children","_c","options","ctx","control","Control","Layers","undefined","createElementObject","extendContext","layersControl","updateLayersControl","props","prevProps","collapsed","collapse","expand","exports","useLayersControl","createControlHook","LayersControl","createContainerComponent","createControlledLayer","addLayerToControl","ControlledLayer","parentContext","useLeafletContext","propsRef","useRef","layer","setLayer","useState","map","addLayer","useCallback","layerToAdd","current","checked","name","removeLayer","layerToRemove","context","useMemo","layerContainer","useEffect","React","createElement","LeafletProvider","value","BaseLayer","addBaseLayer","Overlay","addOverlay"],"sources":["LayersControl.js"],"sourcesContent":["import { LeafletProvider, createContainerComponent, createControlHook, createElementHook, createElementObject, extendContext, useLeafletContext } from '@react-leaflet/core';\nimport { Control } from 'leaflet';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nexport const useLayersControlElement = createElementHook(function createLayersControl({ children: _c , ...options }, ctx) {\n    const control = new Control.Layers(undefined, undefined, options);\n    return createElementObject(control, extendContext(ctx, {\n        layersControl: control\n    }));\n}, function updateLayersControl(control, props, prevProps) {\n    if (props.collapsed !== prevProps.collapsed) {\n        if (props.collapsed === true) {\n            control.collapse();\n        } else {\n            control.expand();\n        }\n    }\n});\nexport const useLayersControl = createControlHook(useLayersControlElement);\n// @ts-ignore\nexport const LayersControl = createContainerComponent(useLayersControl);\nexport function createControlledLayer(addLayerToControl) {\n    return function ControlledLayer(props) {\n        const parentContext = useLeafletContext();\n        const propsRef = useRef(props);\n        const [layer, setLayer] = useState(null);\n        const { layersControl , map  } = parentContext;\n        const addLayer = useCallback((layerToAdd)=>{\n            if (layersControl != null) {\n                if (propsRef.current.checked) {\n                    map.addLayer(layerToAdd);\n                }\n                addLayerToControl(layersControl, layerToAdd, propsRef.current.name);\n                setLayer(layerToAdd);\n            }\n        }, [\n            layersControl,\n            map\n        ]);\n        const removeLayer = useCallback((layerToRemove)=>{\n            layersControl?.removeLayer(layerToRemove);\n            setLayer(null);\n        }, [\n            layersControl\n        ]);\n        const context = useMemo(()=>{\n            return extendContext(parentContext, {\n                layerContainer: {\n                    addLayer,\n                    removeLayer\n                }\n            });\n        }, [\n            parentContext,\n            addLayer,\n            removeLayer\n        ]);\n        useEffect(()=>{\n            if (layer !== null && propsRef.current !== props) {\n                if (props.checked === true && (propsRef.current.checked == null || propsRef.current.checked === false)) {\n                    map.addLayer(layer);\n                } else if (propsRef.current.checked === true && (props.checked == null || props.checked === false)) {\n                    map.removeLayer(layer);\n                }\n                propsRef.current = props;\n            }\n        });\n        return props.children ? /*#__PURE__*/ React.createElement(LeafletProvider, {\n            value: context\n        }, props.children) : null;\n    };\n}\nLayersControl.BaseLayer = createControlledLayer(function addBaseLayer(layersControl, layer, name) {\n    layersControl.addBaseLayer(layer, name);\n});\nLayersControl.Overlay = createControlledLayer(function addOverlay(layersControl, layer, name) {\n    layersControl.addOverlay(layer, name);\n});\n"],"mappings":"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"}