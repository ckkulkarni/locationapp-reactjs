899e25a5cb2d0c7e4a7f1656312c877e
"use strict";
'use client';

/* eslint-disable consistent-return, jsx-a11y/no-noninteractive-tabindex */
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FocusTrap = FocusTrap;
var React = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _utils = require("@mui/utils");
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function (nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}
function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }
  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }
  var cache = _getRequireWildcardCache(nodeInterop);
  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }
  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }
  newObj.default = obj;
  if (cache) {
    cache.set(obj, newObj);
  }
  return newObj;
}
// Inspired by https://github.com/focus-trap/tabbable
const candidatesSelector = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable="false"])'].join(',');
function getTabIndex(node) {
  const tabindexAttr = parseInt(node.getAttribute('tabindex') || '', 10);
  if (!Number.isNaN(tabindexAttr)) {
    return tabindexAttr;
  }

  // Browsers do not return `tabIndex` correctly for contentEditable nodes;
  // https://bugs.chromium.org/p/chromium/issues/detail?id=661108&q=contenteditable%20tabindex&can=2
  // so if they don't have a tabindex attribute specifically set, assume it's 0.
  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default
  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,
  //  yet they are still part of the regular tab order; in FF, they get a default
  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab
  //  order, consider their tab index to be 0.
  if (node.contentEditable === 'true' || (node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {
    return 0;
  }
  return node.tabIndex;
}
function isNonTabbableRadio(node) {
  if (node.tagName !== 'INPUT' || node.type !== 'radio') {
    return false;
  }
  if (!node.name) {
    return false;
  }
  const getRadio = selector => node.ownerDocument.querySelector(`input[type="radio"]${selector}`);
  let roving = getRadio(`[name="${node.name}"]:checked`);
  if (!roving) {
    roving = getRadio(`[name="${node.name}"]`);
  }
  return roving !== node;
}
function isNodeMatchingSelectorFocusable(node) {
  if (node.disabled || node.tagName === 'INPUT' && node.type === 'hidden' || isNonTabbableRadio(node)) {
    return false;
  }
  return true;
}
function defaultGetTabbable(root) {
  const regularTabNodes = [];
  const orderedTabNodes = [];
  Array.from(root.querySelectorAll(candidatesSelector)).forEach((node, i) => {
    const nodeTabIndex = getTabIndex(node);
    if (nodeTabIndex === -1 || !isNodeMatchingSelectorFocusable(node)) {
      return;
    }
    if (nodeTabIndex === 0) {
      regularTabNodes.push(node);
    } else {
      orderedTabNodes.push({
        documentOrder: i,
        tabIndex: nodeTabIndex,
        node: node
      });
    }
  });
  return orderedTabNodes.sort((a, b) => a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex).map(a => a.node).concat(regularTabNodes);
}
function defaultIsEnabled() {
  return true;
}

/**
 * Utility component that locks focus inside the component.
 *
 * Demos:
 *
 * - [Focus Trap](https://mui.com/base-ui/react-focus-trap/)
 *
 * API:
 *
 * - [FocusTrap API](https://mui.com/base-ui/react-focus-trap/components-api/#focus-trap)
 */
function FocusTrap(props) {
  const {
    children,
    disableAutoFocus = false,
    disableEnforceFocus = false,
    disableRestoreFocus = false,
    getTabbable = defaultGetTabbable,
    isEnabled = defaultIsEnabled,
    open
  } = props;
  const ignoreNextEnforceFocus = React.useRef(false);
  const sentinelStart = React.useRef(null);
  const sentinelEnd = React.useRef(null);
  const nodeToRestore = React.useRef(null);
  const reactFocusEventTarget = React.useRef(null);
  // This variable is useful when disableAutoFocus is true.
  // It waits for the active element to move into the component to activate.
  const activated = React.useRef(false);
  const rootRef = React.useRef(null);
  // @ts-expect-error TODO upstream fix
  const handleRef = (0, _utils.unstable_useForkRef)(children.ref, rootRef);
  const lastKeydown = React.useRef(null);
  React.useEffect(() => {
    // We might render an empty child.
    if (!open || !rootRef.current) {
      return;
    }
    activated.current = !disableAutoFocus;
  }, [disableAutoFocus, open]);
  React.useEffect(() => {
    // We might render an empty child.
    if (!open || !rootRef.current) {
      return;
    }
    const doc = (0, _utils.unstable_ownerDocument)(rootRef.current);
    if (!rootRef.current.contains(doc.activeElement)) {
      if (!rootRef.current.hasAttribute('tabIndex')) {
        if (process.env.NODE_ENV !== 'production') {
          console.error(['MUI: The modal content node does not accept focus.', 'For the benefit of assistive technologies, ' + 'the tabIndex of the node is being set to "-1".'].join('\n'));
        }
        rootRef.current.setAttribute('tabIndex', '-1');
      }
      if (activated.current) {
        rootRef.current.focus();
      }
    }
    return () => {
      // restoreLastFocus()
      if (!disableRestoreFocus) {
        // In IE11 it is possible for document.activeElement to be null resulting
        // in nodeToRestore.current being null.
        // Not all elements in IE11 have a focus method.
        // Once IE11 support is dropped the focus() call can be unconditional.
        if (nodeToRestore.current && nodeToRestore.current.focus) {
          ignoreNextEnforceFocus.current = true;
          nodeToRestore.current.focus();
        }
        nodeToRestore.current = null;
      }
    };
    // Missing `disableRestoreFocus` which is fine.
    // We don't support changing that prop on an open FocusTrap
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [open]);
  React.useEffect(() => {
    // We might render an empty child.
    if (!open || !rootRef.current) {
      return;
    }
    const doc = (0, _utils.unstable_ownerDocument)(rootRef.current);
    const contain = nativeEvent => {
      const {
        current: rootElement
      } = rootRef;

      // Cleanup functions are executed lazily in React 17.
      // Contain can be called between the component being unmounted and its cleanup function being run.
      if (rootElement === null) {
        return;
      }
      if (!doc.hasFocus() || disableEnforceFocus || !isEnabled() || ignoreNextEnforceFocus.current) {
        ignoreNextEnforceFocus.current = false;
        return;
      }
      if (!rootElement.contains(doc.activeElement)) {
        // if the focus event is not coming from inside the children's react tree, reset the refs
        if (nativeEvent && reactFocusEventTarget.current !== nativeEvent.target || doc.activeElement !== reactFocusEventTarget.current) {
          reactFocusEventTarget.current = null;
        } else if (reactFocusEventTarget.current !== null) {
          return;
        }
        if (!activated.current) {
          return;
        }
        let tabbable = [];
        if (doc.activeElement === sentinelStart.current || doc.activeElement === sentinelEnd.current) {
          tabbable = getTabbable(rootRef.current);
        }
        if (tabbable.length > 0) {
          var _lastKeydown$current, _lastKeydown$current2;
          const isShiftTab = Boolean(((_lastKeydown$current = lastKeydown.current) == null ? void 0 : _lastKeydown$current.shiftKey) && ((_lastKeydown$current2 = lastKeydown.current) == null ? void 0 : _lastKeydown$current2.key) === 'Tab');
          const focusNext = tabbable[0];
          const focusPrevious = tabbable[tabbable.length - 1];
          if (typeof focusNext !== 'string' && typeof focusPrevious !== 'string') {
            if (isShiftTab) {
              focusPrevious.focus();
            } else {
              focusNext.focus();
            }
          }
        } else {
          rootElement.focus();
        }
      }
    };
    const loopFocus = nativeEvent => {
      lastKeydown.current = nativeEvent;
      if (disableEnforceFocus || !isEnabled() || nativeEvent.key !== 'Tab') {
        return;
      }

      // Make sure the next tab starts from the right place.
      // doc.activeElement refers to the origin.
      if (doc.activeElement === rootRef.current && nativeEvent.shiftKey) {
        // We need to ignore the next contain as
        // it will try to move the focus back to the rootRef element.
        ignoreNextEnforceFocus.current = true;
        if (sentinelEnd.current) {
          sentinelEnd.current.focus();
        }
      }
    };
    doc.addEventListener('focusin', contain);
    doc.addEventListener('keydown', loopFocus, true);

    // With Edge, Safari and Firefox, no focus related events are fired when the focused area stops being a focused area.
    // e.g. https://bugzilla.mozilla.org/show_bug.cgi?id=559561.
    // Instead, we can look if the active element was restored on the BODY element.
    //
    // The whatwg spec defines how the browser should behave but does not explicitly mention any events:
    // https://html.spec.whatwg.org/multipage/interaction.html#focus-fixup-rule.
    const interval = setInterval(() => {
      if (doc.activeElement && doc.activeElement.tagName === 'BODY') {
        contain(null);
      }
    }, 50);
    return () => {
      clearInterval(interval);
      doc.removeEventListener('focusin', contain);
      doc.removeEventListener('keydown', loopFocus, true);
    };
  }, [disableAutoFocus, disableEnforceFocus, disableRestoreFocus, isEnabled, open, getTabbable]);
  const onFocus = event => {
    if (nodeToRestore.current === null) {
      nodeToRestore.current = event.relatedTarget;
    }
    activated.current = true;
    reactFocusEventTarget.current = event.target;
    const childrenPropsHandler = children.props.onFocus;
    if (childrenPropsHandler) {
      childrenPropsHandler(event);
    }
  };
  const handleFocusSentinel = event => {
    if (nodeToRestore.current === null) {
      nodeToRestore.current = event.relatedTarget;
    }
    activated.current = true;
  };
  return /*#__PURE__*/(0, _jsxRuntime.jsxs)(React.Fragment, {
    children: [/*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
      tabIndex: open ? 0 : -1,
      onFocus: handleFocusSentinel,
      ref: sentinelStart,
      "data-testid": "sentinelStart"
    }), /*#__PURE__*/React.cloneElement(children, {
      ref: handleRef,
      onFocus
    }), /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
      tabIndex: open ? 0 : -1,
      onFocus: handleFocusSentinel,
      ref: sentinelEnd,
      "data-testid": "sentinelEnd"
    })]
  });
}
process.env.NODE_ENV !== "production" ? FocusTrap.propTypes /* remove-proptypes */ = {
  // ----------------------------- Warning --------------------------------
  // | These PropTypes are generated from the TypeScript type definitions |
  // |     To update them edit TypeScript types and run "yarn proptypes"  |
  // ----------------------------------------------------------------------
  /**
   * A single child content element.
   */
  children: _utils.elementAcceptingRef,
  /**
   * If `true`, the focus trap will not automatically shift focus to itself when it opens, and
   * replace it to the last focused element when it closes.
   * This also works correctly with any focus trap children that have the `disableAutoFocus` prop.
   *
   * Generally this should never be set to `true` as it makes the focus trap less
   * accessible to assistive technologies, like screen readers.
   * @default false
   */
  disableAutoFocus: _propTypes.default.bool,
  /**
   * If `true`, the focus trap will not prevent focus from leaving the focus trap while open.
   *
   * Generally this should never be set to `true` as it makes the focus trap less
   * accessible to assistive technologies, like screen readers.
   * @default false
   */
  disableEnforceFocus: _propTypes.default.bool,
  /**
   * If `true`, the focus trap will not restore focus to previously focused element once
   * focus trap is hidden or unmounted.
   * @default false
   */
  disableRestoreFocus: _propTypes.default.bool,
  /**
   * Returns an array of ordered tabbable nodes (i.e. in tab order) within the root.
   * For instance, you can provide the "tabbable" npm dependency.
   * @param {HTMLElement} root
   */
  getTabbable: _propTypes.default.func,
  /**
   * This prop extends the `open` prop.
   * It allows to toggle the open state without having to wait for a rerender when changing the `open` prop.
   * This prop should be memoized.
   * It can be used to support multiple focus trap mounted at the same time.
   * @default function defaultIsEnabled(): boolean {
   *   return true;
   * }
   */
  isEnabled: _propTypes.default.func,
  /**
   * If `true`, focus is locked.
   */
  open: _propTypes.default.bool.isRequired
} : void 0;
if (process.env.NODE_ENV !== 'production') {
  // eslint-disable-next-line
  FocusTrap['propTypes' + ''] = (0, _utils.exactProp)(FocusTrap.propTypes);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRm9jdXNUcmFwIiwiUmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9wcm9wVHlwZXMiLCJfdXRpbHMiLCJfanN4UnVudGltZSIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiY2FuZGlkYXRlc1NlbGVjdG9yIiwiam9pbiIsImdldFRhYkluZGV4Iiwibm9kZSIsInRhYmluZGV4QXR0ciIsInBhcnNlSW50IiwiZ2V0QXR0cmlidXRlIiwiTnVtYmVyIiwiaXNOYU4iLCJjb250ZW50RWRpdGFibGUiLCJub2RlTmFtZSIsInRhYkluZGV4IiwiaXNOb25UYWJiYWJsZVJhZGlvIiwidGFnTmFtZSIsInR5cGUiLCJuYW1lIiwiZ2V0UmFkaW8iLCJzZWxlY3RvciIsIm93bmVyRG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicm92aW5nIiwiaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZSIsImRpc2FibGVkIiwiZGVmYXVsdEdldFRhYmJhYmxlIiwicm9vdCIsInJlZ3VsYXJUYWJOb2RlcyIsIm9yZGVyZWRUYWJOb2RlcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaSIsIm5vZGVUYWJJbmRleCIsInB1c2giLCJkb2N1bWVudE9yZGVyIiwic29ydCIsImEiLCJiIiwibWFwIiwiY29uY2F0IiwiZGVmYXVsdElzRW5hYmxlZCIsInByb3BzIiwiY2hpbGRyZW4iLCJkaXNhYmxlQXV0b0ZvY3VzIiwiZGlzYWJsZUVuZm9yY2VGb2N1cyIsImRpc2FibGVSZXN0b3JlRm9jdXMiLCJnZXRUYWJiYWJsZSIsImlzRW5hYmxlZCIsIm9wZW4iLCJpZ25vcmVOZXh0RW5mb3JjZUZvY3VzIiwidXNlUmVmIiwic2VudGluZWxTdGFydCIsInNlbnRpbmVsRW5kIiwibm9kZVRvUmVzdG9yZSIsInJlYWN0Rm9jdXNFdmVudFRhcmdldCIsImFjdGl2YXRlZCIsInJvb3RSZWYiLCJoYW5kbGVSZWYiLCJ1bnN0YWJsZV91c2VGb3JrUmVmIiwicmVmIiwibGFzdEtleWRvd24iLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiZG9jIiwidW5zdGFibGVfb3duZXJEb2N1bWVudCIsImNvbnRhaW5zIiwiYWN0aXZlRWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImNvbnNvbGUiLCJlcnJvciIsInNldEF0dHJpYnV0ZSIsImZvY3VzIiwiY29udGFpbiIsIm5hdGl2ZUV2ZW50Iiwicm9vdEVsZW1lbnQiLCJoYXNGb2N1cyIsInRhcmdldCIsInRhYmJhYmxlIiwibGVuZ3RoIiwiX2xhc3RLZXlkb3duJGN1cnJlbnQiLCJfbGFzdEtleWRvd24kY3VycmVudDIiLCJpc1NoaWZ0VGFiIiwiQm9vbGVhbiIsInNoaWZ0S2V5IiwiZm9jdXNOZXh0IiwiZm9jdXNQcmV2aW91cyIsImxvb3BGb2N1cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbkZvY3VzIiwiZXZlbnQiLCJyZWxhdGVkVGFyZ2V0IiwiY2hpbGRyZW5Qcm9wc0hhbmRsZXIiLCJoYW5kbGVGb2N1c1NlbnRpbmVsIiwianN4cyIsIkZyYWdtZW50IiwianN4IiwiY2xvbmVFbGVtZW50IiwicHJvcFR5cGVzIiwiZWxlbWVudEFjY2VwdGluZ1JlZiIsImJvb2wiLCJmdW5jIiwiaXNSZXF1aXJlZCIsImV4YWN0UHJvcCJdLCJzb3VyY2VzIjpbIkZvY3VzVHJhcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbid1c2UgY2xpZW50JztcblxuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4sIGpzeC1hMTF5L25vLW5vbmludGVyYWN0aXZlLXRhYmluZGV4ICovXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkZvY3VzVHJhcCA9IEZvY3VzVHJhcDtcbnZhciBSZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInByb3AtdHlwZXNcIikpO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCJAbXVpL3V0aWxzXCIpO1xudmFyIF9qc3hSdW50aW1lID0gcmVxdWlyZShcInJlYWN0L2pzeC1ydW50aW1lXCIpO1xuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKSB7IGlmICh0eXBlb2YgV2Vha01hcCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbnVsbDsgdmFyIGNhY2hlQmFiZWxJbnRlcm9wID0gbmV3IFdlYWtNYXAoKTsgdmFyIGNhY2hlTm9kZUludGVyb3AgPSBuZXcgV2Vha01hcCgpOyByZXR1cm4gKF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIChub2RlSW50ZXJvcCkgeyByZXR1cm4gbm9kZUludGVyb3AgPyBjYWNoZU5vZGVJbnRlcm9wIDogY2FjaGVCYWJlbEludGVyb3A7IH0pKG5vZGVJbnRlcm9wKTsgfVxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqLCBub2RlSW50ZXJvcCkgeyBpZiAoIW5vZGVJbnRlcm9wICYmIG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHsgcmV0dXJuIHsgZGVmYXVsdDogb2JqIH07IH0gdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoa2V5ICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gaGFzUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsOyBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyBpZiAoY2FjaGUpIHsgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTsgfSByZXR1cm4gbmV3T2JqOyB9XG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vZm9jdXMtdHJhcC90YWJiYWJsZVxuY29uc3QgY2FuZGlkYXRlc1NlbGVjdG9yID0gWydpbnB1dCcsICdzZWxlY3QnLCAndGV4dGFyZWEnLCAnYVtocmVmXScsICdidXR0b24nLCAnW3RhYmluZGV4XScsICdhdWRpb1tjb250cm9sc10nLCAndmlkZW9bY29udHJvbHNdJywgJ1tjb250ZW50ZWRpdGFibGVdOm5vdChbY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIl0pJ10uam9pbignLCcpO1xuZnVuY3Rpb24gZ2V0VGFiSW5kZXgobm9kZSkge1xuICBjb25zdCB0YWJpbmRleEF0dHIgPSBwYXJzZUludChub2RlLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSB8fCAnJywgMTApO1xuICBpZiAoIU51bWJlci5pc05hTih0YWJpbmRleEF0dHIpKSB7XG4gICAgcmV0dXJuIHRhYmluZGV4QXR0cjtcbiAgfVxuXG4gIC8vIEJyb3dzZXJzIGRvIG5vdCByZXR1cm4gYHRhYkluZGV4YCBjb3JyZWN0bHkgZm9yIGNvbnRlbnRFZGl0YWJsZSBub2RlcztcbiAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NjYxMTA4JnE9Y29udGVudGVkaXRhYmxlJTIwdGFiaW5kZXgmY2FuPTJcbiAgLy8gc28gaWYgdGhleSBkb24ndCBoYXZlIGEgdGFiaW5kZXggYXR0cmlidXRlIHNwZWNpZmljYWxseSBzZXQsIGFzc3VtZSBpdCdzIDAuXG4gIC8vIGluIENocm9tZSwgPGRldGFpbHMvPiwgPGF1ZGlvIGNvbnRyb2xzLz4gYW5kIDx2aWRlbyBjb250cm9scy8+IGVsZW1lbnRzIGdldCBhIGRlZmF1bHRcbiAgLy8gIGB0YWJJbmRleGAgb2YgLTEgd2hlbiB0aGUgJ3RhYmluZGV4JyBhdHRyaWJ1dGUgaXNuJ3Qgc3BlY2lmaWVkIGluIHRoZSBET00sXG4gIC8vICB5ZXQgdGhleSBhcmUgc3RpbGwgcGFydCBvZiB0aGUgcmVndWxhciB0YWIgb3JkZXI7IGluIEZGLCB0aGV5IGdldCBhIGRlZmF1bHRcbiAgLy8gIGB0YWJJbmRleGAgb2YgMDsgc2luY2UgQ2hyb21lIHN0aWxsIHB1dHMgdGhvc2UgZWxlbWVudHMgaW4gdGhlIHJlZ3VsYXIgdGFiXG4gIC8vICBvcmRlciwgY29uc2lkZXIgdGhlaXIgdGFiIGluZGV4IHRvIGJlIDAuXG4gIGlmIChub2RlLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnIHx8IChub2RlLm5vZGVOYW1lID09PSAnQVVESU8nIHx8IG5vZGUubm9kZU5hbWUgPT09ICdWSURFTycgfHwgbm9kZS5ub2RlTmFtZSA9PT0gJ0RFVEFJTFMnKSAmJiBub2RlLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSA9PT0gbnVsbCkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiBub2RlLnRhYkluZGV4O1xufVxuZnVuY3Rpb24gaXNOb25UYWJiYWJsZVJhZGlvKG5vZGUpIHtcbiAgaWYgKG5vZGUudGFnTmFtZSAhPT0gJ0lOUFVUJyB8fCBub2RlLnR5cGUgIT09ICdyYWRpbycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCFub2RlLm5hbWUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgZ2V0UmFkaW8gPSBzZWxlY3RvciA9PiBub2RlLm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbdHlwZT1cInJhZGlvXCJdJHtzZWxlY3Rvcn1gKTtcbiAgbGV0IHJvdmluZyA9IGdldFJhZGlvKGBbbmFtZT1cIiR7bm9kZS5uYW1lfVwiXTpjaGVja2VkYCk7XG4gIGlmICghcm92aW5nKSB7XG4gICAgcm92aW5nID0gZ2V0UmFkaW8oYFtuYW1lPVwiJHtub2RlLm5hbWV9XCJdYCk7XG4gIH1cbiAgcmV0dXJuIHJvdmluZyAhPT0gbm9kZTtcbn1cbmZ1bmN0aW9uIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JGb2N1c2FibGUobm9kZSkge1xuICBpZiAobm9kZS5kaXNhYmxlZCB8fCBub2RlLnRhZ05hbWUgPT09ICdJTlBVVCcgJiYgbm9kZS50eXBlID09PSAnaGlkZGVuJyB8fCBpc05vblRhYmJhYmxlUmFkaW8obm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBkZWZhdWx0R2V0VGFiYmFibGUocm9vdCkge1xuICBjb25zdCByZWd1bGFyVGFiTm9kZXMgPSBbXTtcbiAgY29uc3Qgb3JkZXJlZFRhYk5vZGVzID0gW107XG4gIEFycmF5LmZyb20ocm9vdC5xdWVyeVNlbGVjdG9yQWxsKGNhbmRpZGF0ZXNTZWxlY3RvcikpLmZvckVhY2goKG5vZGUsIGkpID0+IHtcbiAgICBjb25zdCBub2RlVGFiSW5kZXggPSBnZXRUYWJJbmRleChub2RlKTtcbiAgICBpZiAobm9kZVRhYkluZGV4ID09PSAtMSB8fCAhaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZShub2RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobm9kZVRhYkluZGV4ID09PSAwKSB7XG4gICAgICByZWd1bGFyVGFiTm9kZXMucHVzaChub2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3JkZXJlZFRhYk5vZGVzLnB1c2goe1xuICAgICAgICBkb2N1bWVudE9yZGVyOiBpLFxuICAgICAgICB0YWJJbmRleDogbm9kZVRhYkluZGV4LFxuICAgICAgICBub2RlOiBub2RlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3JkZXJlZFRhYk5vZGVzLnNvcnQoKGEsIGIpID0+IGEudGFiSW5kZXggPT09IGIudGFiSW5kZXggPyBhLmRvY3VtZW50T3JkZXIgLSBiLmRvY3VtZW50T3JkZXIgOiBhLnRhYkluZGV4IC0gYi50YWJJbmRleCkubWFwKGEgPT4gYS5ub2RlKS5jb25jYXQocmVndWxhclRhYk5vZGVzKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRJc0VuYWJsZWQoKSB7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFV0aWxpdHkgY29tcG9uZW50IHRoYXQgbG9ja3MgZm9jdXMgaW5zaWRlIHRoZSBjb21wb25lbnQuXG4gKlxuICogRGVtb3M6XG4gKlxuICogLSBbRm9jdXMgVHJhcF0oaHR0cHM6Ly9tdWkuY29tL2Jhc2UtdWkvcmVhY3QtZm9jdXMtdHJhcC8pXG4gKlxuICogQVBJOlxuICpcbiAqIC0gW0ZvY3VzVHJhcCBBUEldKGh0dHBzOi8vbXVpLmNvbS9iYXNlLXVpL3JlYWN0LWZvY3VzLXRyYXAvY29tcG9uZW50cy1hcGkvI2ZvY3VzLXRyYXApXG4gKi9cbmZ1bmN0aW9uIEZvY3VzVHJhcChwcm9wcykge1xuICBjb25zdCB7XG4gICAgY2hpbGRyZW4sXG4gICAgZGlzYWJsZUF1dG9Gb2N1cyA9IGZhbHNlLFxuICAgIGRpc2FibGVFbmZvcmNlRm9jdXMgPSBmYWxzZSxcbiAgICBkaXNhYmxlUmVzdG9yZUZvY3VzID0gZmFsc2UsXG4gICAgZ2V0VGFiYmFibGUgPSBkZWZhdWx0R2V0VGFiYmFibGUsXG4gICAgaXNFbmFibGVkID0gZGVmYXVsdElzRW5hYmxlZCxcbiAgICBvcGVuXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgaWdub3JlTmV4dEVuZm9yY2VGb2N1cyA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IHNlbnRpbmVsU3RhcnQgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHNlbnRpbmVsRW5kID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCBub2RlVG9SZXN0b3JlID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCByZWFjdEZvY3VzRXZlbnRUYXJnZXQgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIC8vIFRoaXMgdmFyaWFibGUgaXMgdXNlZnVsIHdoZW4gZGlzYWJsZUF1dG9Gb2N1cyBpcyB0cnVlLlxuICAvLyBJdCB3YWl0cyBmb3IgdGhlIGFjdGl2ZSBlbGVtZW50IHRvIG1vdmUgaW50byB0aGUgY29tcG9uZW50IHRvIGFjdGl2YXRlLlxuICBjb25zdCBhY3RpdmF0ZWQgPSBSZWFjdC51c2VSZWYoZmFsc2UpO1xuICBjb25zdCByb290UmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE8gdXBzdHJlYW0gZml4XG4gIGNvbnN0IGhhbmRsZVJlZiA9ICgwLCBfdXRpbHMudW5zdGFibGVfdXNlRm9ya1JlZikoY2hpbGRyZW4ucmVmLCByb290UmVmKTtcbiAgY29uc3QgbGFzdEtleWRvd24gPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gV2UgbWlnaHQgcmVuZGVyIGFuIGVtcHR5IGNoaWxkLlxuICAgIGlmICghb3BlbiB8fCAhcm9vdFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjdGl2YXRlZC5jdXJyZW50ID0gIWRpc2FibGVBdXRvRm9jdXM7XG4gIH0sIFtkaXNhYmxlQXV0b0ZvY3VzLCBvcGVuXSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gV2UgbWlnaHQgcmVuZGVyIGFuIGVtcHR5IGNoaWxkLlxuICAgIGlmICghb3BlbiB8fCAhcm9vdFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRvYyA9ICgwLCBfdXRpbHMudW5zdGFibGVfb3duZXJEb2N1bWVudCkocm9vdFJlZi5jdXJyZW50KTtcbiAgICBpZiAoIXJvb3RSZWYuY3VycmVudC5jb250YWlucyhkb2MuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgIGlmICghcm9vdFJlZi5jdXJyZW50Lmhhc0F0dHJpYnV0ZSgndGFiSW5kZXgnKSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoWydNVUk6IFRoZSBtb2RhbCBjb250ZW50IG5vZGUgZG9lcyBub3QgYWNjZXB0IGZvY3VzLicsICdGb3IgdGhlIGJlbmVmaXQgb2YgYXNzaXN0aXZlIHRlY2hub2xvZ2llcywgJyArICd0aGUgdGFiSW5kZXggb2YgdGhlIG5vZGUgaXMgYmVpbmcgc2V0IHRvIFwiLTFcIi4nXS5qb2luKCdcXG4nKSk7XG4gICAgICAgIH1cbiAgICAgICAgcm9vdFJlZi5jdXJyZW50LnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCAnLTEnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhY3RpdmF0ZWQuY3VycmVudCkge1xuICAgICAgICByb290UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIHJlc3RvcmVMYXN0Rm9jdXMoKVxuICAgICAgaWYgKCFkaXNhYmxlUmVzdG9yZUZvY3VzKSB7XG4gICAgICAgIC8vIEluIElFMTEgaXQgaXMgcG9zc2libGUgZm9yIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgdG8gYmUgbnVsbCByZXN1bHRpbmdcbiAgICAgICAgLy8gaW4gbm9kZVRvUmVzdG9yZS5jdXJyZW50IGJlaW5nIG51bGwuXG4gICAgICAgIC8vIE5vdCBhbGwgZWxlbWVudHMgaW4gSUUxMSBoYXZlIGEgZm9jdXMgbWV0aG9kLlxuICAgICAgICAvLyBPbmNlIElFMTEgc3VwcG9ydCBpcyBkcm9wcGVkIHRoZSBmb2N1cygpIGNhbGwgY2FuIGJlIHVuY29uZGl0aW9uYWwuXG4gICAgICAgIGlmIChub2RlVG9SZXN0b3JlLmN1cnJlbnQgJiYgbm9kZVRvUmVzdG9yZS5jdXJyZW50LmZvY3VzKSB7XG4gICAgICAgICAgaWdub3JlTmV4dEVuZm9yY2VGb2N1cy5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICBub2RlVG9SZXN0b3JlLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlVG9SZXN0b3JlLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gICAgLy8gTWlzc2luZyBgZGlzYWJsZVJlc3RvcmVGb2N1c2Agd2hpY2ggaXMgZmluZS5cbiAgICAvLyBXZSBkb24ndCBzdXBwb3J0IGNoYW5naW5nIHRoYXQgcHJvcCBvbiBhbiBvcGVuIEZvY3VzVHJhcFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW29wZW5dKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBXZSBtaWdodCByZW5kZXIgYW4gZW1wdHkgY2hpbGQuXG4gICAgaWYgKCFvcGVuIHx8ICFyb290UmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZG9jID0gKDAsIF91dGlscy51bnN0YWJsZV9vd25lckRvY3VtZW50KShyb290UmVmLmN1cnJlbnQpO1xuICAgIGNvbnN0IGNvbnRhaW4gPSBuYXRpdmVFdmVudCA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGN1cnJlbnQ6IHJvb3RFbGVtZW50XG4gICAgICB9ID0gcm9vdFJlZjtcblxuICAgICAgLy8gQ2xlYW51cCBmdW5jdGlvbnMgYXJlIGV4ZWN1dGVkIGxhemlseSBpbiBSZWFjdCAxNy5cbiAgICAgIC8vIENvbnRhaW4gY2FuIGJlIGNhbGxlZCBiZXR3ZWVuIHRoZSBjb21wb25lbnQgYmVpbmcgdW5tb3VudGVkIGFuZCBpdHMgY2xlYW51cCBmdW5jdGlvbiBiZWluZyBydW4uXG4gICAgICBpZiAocm9vdEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFkb2MuaGFzRm9jdXMoKSB8fCBkaXNhYmxlRW5mb3JjZUZvY3VzIHx8ICFpc0VuYWJsZWQoKSB8fCBpZ25vcmVOZXh0RW5mb3JjZUZvY3VzLmN1cnJlbnQpIHtcbiAgICAgICAgaWdub3JlTmV4dEVuZm9yY2VGb2N1cy5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghcm9vdEVsZW1lbnQuY29udGFpbnMoZG9jLmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAgIC8vIGlmIHRoZSBmb2N1cyBldmVudCBpcyBub3QgY29taW5nIGZyb20gaW5zaWRlIHRoZSBjaGlsZHJlbidzIHJlYWN0IHRyZWUsIHJlc2V0IHRoZSByZWZzXG4gICAgICAgIGlmIChuYXRpdmVFdmVudCAmJiByZWFjdEZvY3VzRXZlbnRUYXJnZXQuY3VycmVudCAhPT0gbmF0aXZlRXZlbnQudGFyZ2V0IHx8IGRvYy5hY3RpdmVFbGVtZW50ICE9PSByZWFjdEZvY3VzRXZlbnRUYXJnZXQuY3VycmVudCkge1xuICAgICAgICAgIHJlYWN0Rm9jdXNFdmVudFRhcmdldC5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChyZWFjdEZvY3VzRXZlbnRUYXJnZXQuY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdGl2YXRlZC5jdXJyZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YWJiYWJsZSA9IFtdO1xuICAgICAgICBpZiAoZG9jLmFjdGl2ZUVsZW1lbnQgPT09IHNlbnRpbmVsU3RhcnQuY3VycmVudCB8fCBkb2MuYWN0aXZlRWxlbWVudCA9PT0gc2VudGluZWxFbmQuY3VycmVudCkge1xuICAgICAgICAgIHRhYmJhYmxlID0gZ2V0VGFiYmFibGUocm9vdFJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFiYmFibGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciBfbGFzdEtleWRvd24kY3VycmVudCwgX2xhc3RLZXlkb3duJGN1cnJlbnQyO1xuICAgICAgICAgIGNvbnN0IGlzU2hpZnRUYWIgPSBCb29sZWFuKCgoX2xhc3RLZXlkb3duJGN1cnJlbnQgPSBsYXN0S2V5ZG93bi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2xhc3RLZXlkb3duJGN1cnJlbnQuc2hpZnRLZXkpICYmICgoX2xhc3RLZXlkb3duJGN1cnJlbnQyID0gbGFzdEtleWRvd24uY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9sYXN0S2V5ZG93biRjdXJyZW50Mi5rZXkpID09PSAnVGFiJyk7XG4gICAgICAgICAgY29uc3QgZm9jdXNOZXh0ID0gdGFiYmFibGVbMF07XG4gICAgICAgICAgY29uc3QgZm9jdXNQcmV2aW91cyA9IHRhYmJhYmxlW3RhYmJhYmxlLmxlbmd0aCAtIDFdO1xuICAgICAgICAgIGlmICh0eXBlb2YgZm9jdXNOZXh0ICE9PSAnc3RyaW5nJyAmJiB0eXBlb2YgZm9jdXNQcmV2aW91cyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmIChpc1NoaWZ0VGFiKSB7XG4gICAgICAgICAgICAgIGZvY3VzUHJldmlvdXMuZm9jdXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZvY3VzTmV4dC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByb290RWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBsb29wRm9jdXMgPSBuYXRpdmVFdmVudCA9PiB7XG4gICAgICBsYXN0S2V5ZG93bi5jdXJyZW50ID0gbmF0aXZlRXZlbnQ7XG4gICAgICBpZiAoZGlzYWJsZUVuZm9yY2VGb2N1cyB8fCAhaXNFbmFibGVkKCkgfHwgbmF0aXZlRXZlbnQua2V5ICE9PSAnVGFiJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbmV4dCB0YWIgc3RhcnRzIGZyb20gdGhlIHJpZ2h0IHBsYWNlLlxuICAgICAgLy8gZG9jLmFjdGl2ZUVsZW1lbnQgcmVmZXJzIHRvIHRoZSBvcmlnaW4uXG4gICAgICBpZiAoZG9jLmFjdGl2ZUVsZW1lbnQgPT09IHJvb3RSZWYuY3VycmVudCAmJiBuYXRpdmVFdmVudC5zaGlmdEtleSkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIGlnbm9yZSB0aGUgbmV4dCBjb250YWluIGFzXG4gICAgICAgIC8vIGl0IHdpbGwgdHJ5IHRvIG1vdmUgdGhlIGZvY3VzIGJhY2sgdG8gdGhlIHJvb3RSZWYgZWxlbWVudC5cbiAgICAgICAgaWdub3JlTmV4dEVuZm9yY2VGb2N1cy5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHNlbnRpbmVsRW5kLmN1cnJlbnQpIHtcbiAgICAgICAgICBzZW50aW5lbEVuZC5jdXJyZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgY29udGFpbik7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsb29wRm9jdXMsIHRydWUpO1xuXG4gICAgLy8gV2l0aCBFZGdlLCBTYWZhcmkgYW5kIEZpcmVmb3gsIG5vIGZvY3VzIHJlbGF0ZWQgZXZlbnRzIGFyZSBmaXJlZCB3aGVuIHRoZSBmb2N1c2VkIGFyZWEgc3RvcHMgYmVpbmcgYSBmb2N1c2VkIGFyZWEuXG4gICAgLy8gZS5nLiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NTk1NjEuXG4gICAgLy8gSW5zdGVhZCwgd2UgY2FuIGxvb2sgaWYgdGhlIGFjdGl2ZSBlbGVtZW50IHdhcyByZXN0b3JlZCBvbiB0aGUgQk9EWSBlbGVtZW50LlxuICAgIC8vXG4gICAgLy8gVGhlIHdoYXR3ZyBzcGVjIGRlZmluZXMgaG93IHRoZSBicm93c2VyIHNob3VsZCBiZWhhdmUgYnV0IGRvZXMgbm90IGV4cGxpY2l0bHkgbWVudGlvbiBhbnkgZXZlbnRzOlxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2ludGVyYWN0aW9uLmh0bWwjZm9jdXMtZml4dXAtcnVsZS5cbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmIChkb2MuYWN0aXZlRWxlbWVudCAmJiBkb2MuYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgY29udGFpbihudWxsKTtcbiAgICAgIH1cbiAgICB9LCA1MCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBjb250YWluKTtcbiAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgbG9vcEZvY3VzLCB0cnVlKTtcbiAgICB9O1xuICB9LCBbZGlzYWJsZUF1dG9Gb2N1cywgZGlzYWJsZUVuZm9yY2VGb2N1cywgZGlzYWJsZVJlc3RvcmVGb2N1cywgaXNFbmFibGVkLCBvcGVuLCBnZXRUYWJiYWJsZV0pO1xuICBjb25zdCBvbkZvY3VzID0gZXZlbnQgPT4ge1xuICAgIGlmIChub2RlVG9SZXN0b3JlLmN1cnJlbnQgPT09IG51bGwpIHtcbiAgICAgIG5vZGVUb1Jlc3RvcmUuY3VycmVudCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XG4gICAgfVxuICAgIGFjdGl2YXRlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICByZWFjdEZvY3VzRXZlbnRUYXJnZXQuY3VycmVudCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjaGlsZHJlblByb3BzSGFuZGxlciA9IGNoaWxkcmVuLnByb3BzLm9uRm9jdXM7XG4gICAgaWYgKGNoaWxkcmVuUHJvcHNIYW5kbGVyKSB7XG4gICAgICBjaGlsZHJlblByb3BzSGFuZGxlcihldmVudCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVGb2N1c1NlbnRpbmVsID0gZXZlbnQgPT4ge1xuICAgIGlmIChub2RlVG9SZXN0b3JlLmN1cnJlbnQgPT09IG51bGwpIHtcbiAgICAgIG5vZGVUb1Jlc3RvcmUuY3VycmVudCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XG4gICAgfVxuICAgIGFjdGl2YXRlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi8oMCwgX2pzeFJ1bnRpbWUuanN4cykoUmVhY3QuRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi8oMCwgX2pzeFJ1bnRpbWUuanN4KShcImRpdlwiLCB7XG4gICAgICB0YWJJbmRleDogb3BlbiA/IDAgOiAtMSxcbiAgICAgIG9uRm9jdXM6IGhhbmRsZUZvY3VzU2VudGluZWwsXG4gICAgICByZWY6IHNlbnRpbmVsU3RhcnQsXG4gICAgICBcImRhdGEtdGVzdGlkXCI6IFwic2VudGluZWxTdGFydFwiXG4gICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGRyZW4sIHtcbiAgICAgIHJlZjogaGFuZGxlUmVmLFxuICAgICAgb25Gb2N1c1xuICAgIH0pLCAvKiNfX1BVUkVfXyovKDAsIF9qc3hSdW50aW1lLmpzeCkoXCJkaXZcIiwge1xuICAgICAgdGFiSW5kZXg6IG9wZW4gPyAwIDogLTEsXG4gICAgICBvbkZvY3VzOiBoYW5kbGVGb2N1c1NlbnRpbmVsLFxuICAgICAgcmVmOiBzZW50aW5lbEVuZCxcbiAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJzZW50aW5lbEVuZFwiXG4gICAgfSldXG4gIH0pO1xufVxucHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gRm9jdXNUcmFwLnByb3BUeXBlcyAvKiByZW1vdmUtcHJvcHR5cGVzICovID0ge1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBXYXJuaW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIHwgVGhlc2UgUHJvcFR5cGVzIGFyZSBnZW5lcmF0ZWQgZnJvbSB0aGUgVHlwZVNjcmlwdCB0eXBlIGRlZmluaXRpb25zIHxcbiAgLy8gfCAgICAgVG8gdXBkYXRlIHRoZW0gZWRpdCBUeXBlU2NyaXB0IHR5cGVzIGFuZCBydW4gXCJ5YXJuIHByb3B0eXBlc1wiICB8XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLyoqXG4gICAqIEEgc2luZ2xlIGNoaWxkIGNvbnRlbnQgZWxlbWVudC5cbiAgICovXG4gIGNoaWxkcmVuOiBfdXRpbHMuZWxlbWVudEFjY2VwdGluZ1JlZixcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdGhlIGZvY3VzIHRyYXAgd2lsbCBub3QgYXV0b21hdGljYWxseSBzaGlmdCBmb2N1cyB0byBpdHNlbGYgd2hlbiBpdCBvcGVucywgYW5kXG4gICAqIHJlcGxhY2UgaXQgdG8gdGhlIGxhc3QgZm9jdXNlZCBlbGVtZW50IHdoZW4gaXQgY2xvc2VzLlxuICAgKiBUaGlzIGFsc28gd29ya3MgY29ycmVjdGx5IHdpdGggYW55IGZvY3VzIHRyYXAgY2hpbGRyZW4gdGhhdCBoYXZlIHRoZSBgZGlzYWJsZUF1dG9Gb2N1c2AgcHJvcC5cbiAgICpcbiAgICogR2VuZXJhbGx5IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHNldCB0byBgdHJ1ZWAgYXMgaXQgbWFrZXMgdGhlIGZvY3VzIHRyYXAgbGVzc1xuICAgKiBhY2Nlc3NpYmxlIHRvIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMsIGxpa2Ugc2NyZWVuIHJlYWRlcnMuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBkaXNhYmxlQXV0b0ZvY3VzOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdGhlIGZvY3VzIHRyYXAgd2lsbCBub3QgcHJldmVudCBmb2N1cyBmcm9tIGxlYXZpbmcgdGhlIGZvY3VzIHRyYXAgd2hpbGUgb3Blbi5cbiAgICpcbiAgICogR2VuZXJhbGx5IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHNldCB0byBgdHJ1ZWAgYXMgaXQgbWFrZXMgdGhlIGZvY3VzIHRyYXAgbGVzc1xuICAgKiBhY2Nlc3NpYmxlIHRvIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMsIGxpa2Ugc2NyZWVuIHJlYWRlcnMuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBkaXNhYmxlRW5mb3JjZUZvY3VzOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdGhlIGZvY3VzIHRyYXAgd2lsbCBub3QgcmVzdG9yZSBmb2N1cyB0byBwcmV2aW91c2x5IGZvY3VzZWQgZWxlbWVudCBvbmNlXG4gICAqIGZvY3VzIHRyYXAgaXMgaGlkZGVuIG9yIHVubW91bnRlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGRpc2FibGVSZXN0b3JlRm9jdXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBvcmRlcmVkIHRhYmJhYmxlIG5vZGVzIChpLmUuIGluIHRhYiBvcmRlcikgd2l0aGluIHRoZSByb290LlxuICAgKiBGb3IgaW5zdGFuY2UsIHlvdSBjYW4gcHJvdmlkZSB0aGUgXCJ0YWJiYWJsZVwiIG5wbSBkZXBlbmRlbmN5LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSByb290XG4gICAqL1xuICBnZXRUYWJiYWJsZTogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBUaGlzIHByb3AgZXh0ZW5kcyB0aGUgYG9wZW5gIHByb3AuXG4gICAqIEl0IGFsbG93cyB0byB0b2dnbGUgdGhlIG9wZW4gc3RhdGUgd2l0aG91dCBoYXZpbmcgdG8gd2FpdCBmb3IgYSByZXJlbmRlciB3aGVuIGNoYW5naW5nIHRoZSBgb3BlbmAgcHJvcC5cbiAgICogVGhpcyBwcm9wIHNob3VsZCBiZSBtZW1vaXplZC5cbiAgICogSXQgY2FuIGJlIHVzZWQgdG8gc3VwcG9ydCBtdWx0aXBsZSBmb2N1cyB0cmFwIG1vdW50ZWQgYXQgdGhlIHNhbWUgdGltZS5cbiAgICogQGRlZmF1bHQgZnVuY3Rpb24gZGVmYXVsdElzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICogICByZXR1cm4gdHJ1ZTtcbiAgICogfVxuICAgKi9cbiAgaXNFbmFibGVkOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgZm9jdXMgaXMgbG9ja2VkLlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZFxufSA6IHZvaWQgMDtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBGb2N1c1RyYXBbJ3Byb3BUeXBlcycgKyAnJ10gPSAoMCwgX3V0aWxzLmV4YWN0UHJvcCkoRm9jdXNUcmFwLnByb3BUeXBlcyk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZO0FBQ1osWUFBWTs7QUFFWjtBQUNBLElBQUlBLHNCQUFzQixHQUFHQyxPQUFPLENBQUMsOENBQThDLENBQUM7QUFDcEZDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxTQUFTLEdBQUdBLFNBQVM7QUFDN0IsSUFBSUMsS0FBSyxHQUFHQyx1QkFBdUIsQ0FBQ1AsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JELElBQUlRLFVBQVUsR0FBR1Qsc0JBQXNCLENBQUNDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUM5RCxJQUFJUyxNQUFNLEdBQUdULE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDbEMsSUFBSVUsV0FBVyxHQUFHVixPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDOUMsU0FBU1csd0JBQXdCQSxDQUFDQyxXQUFXLEVBQUU7RUFBRSxJQUFJLE9BQU9DLE9BQU8sS0FBSyxVQUFVLEVBQUUsT0FBTyxJQUFJO0VBQUUsSUFBSUMsaUJBQWlCLEdBQUcsSUFBSUQsT0FBTyxFQUFFO0VBQUUsSUFBSUUsZ0JBQWdCLEdBQUcsSUFBSUYsT0FBTyxFQUFFO0VBQUUsT0FBTyxDQUFDRix3QkFBd0IsR0FBRyxTQUFBQSxDQUFVQyxXQUFXLEVBQUU7SUFBRSxPQUFPQSxXQUFXLEdBQUdHLGdCQUFnQixHQUFHRCxpQkFBaUI7RUFBRSxD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