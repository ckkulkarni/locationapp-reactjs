126d09f908b5645f670eddcbdb376474
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createElementHook = createElementHook;
exports.createElementObject = createElementObject;
var _react = require("react");
function createElementObject(instance, context, container) {
  return Object.freeze({
    instance,
    context,
    container
  });
}
function createElementHook(createElement, updateElement) {
  if (updateElement == null) {
    return function useImmutableLeafletElement(props, context) {
      const elementRef = (0, _react.useRef)();
      if (!elementRef.current) elementRef.current = createElement(props, context);
      return elementRef;
    };
  }
  return function useMutableLeafletElement(props, context) {
    const elementRef = (0, _react.useRef)();
    if (!elementRef.current) elementRef.current = createElement(props, context);
    const propsRef = (0, _react.useRef)(props);
    const {
      instance
    } = elementRef.current;
    (0, _react.useEffect)(function updateElementProps() {
      if (propsRef.current !== props) {
        updateElement(instance, props, propsRef.current);
        propsRef.current = props;
      }
    }, [instance, props, context]);
    return elementRef;
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiY3JlYXRlRWxlbWVudE9iamVjdCIsImluc3RhbmNlIiwiY29udGV4dCIsImNvbnRhaW5lciIsIk9iamVjdCIsImZyZWV6ZSIsImNyZWF0ZUVsZW1lbnRIb29rIiwiY3JlYXRlRWxlbWVudCIsInVwZGF0ZUVsZW1lbnQiLCJ1c2VJbW11dGFibGVMZWFmbGV0RWxlbWVudCIsInByb3BzIiwiZWxlbWVudFJlZiIsInVzZVJlZiIsImN1cnJlbnQiLCJ1c2VNdXRhYmxlTGVhZmxldEVsZW1lbnQiLCJwcm9wc1JlZiIsInVzZUVmZmVjdCIsInVwZGF0ZUVsZW1lbnRQcm9wcyJdLCJzb3VyY2VzIjpbImVsZW1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudE9iamVjdChpbnN0YW5jZSwgY29udGV4dCwgY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgY29udGFpbmVyXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudEhvb2soY3JlYXRlRWxlbWVudCwgdXBkYXRlRWxlbWVudCkge1xuICAgIGlmICh1cGRhdGVFbGVtZW50ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVzZUltbXV0YWJsZUxlYWZsZXRFbGVtZW50KHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50UmVmID0gdXNlUmVmKCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnRSZWYuY3VycmVudCkgZWxlbWVudFJlZi5jdXJyZW50ID0gY3JlYXRlRWxlbWVudChwcm9wcywgY29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudFJlZjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVzZU11dGFibGVMZWFmbGV0RWxlbWVudChwcm9wcywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBlbGVtZW50UmVmID0gdXNlUmVmKCk7XG4gICAgICAgIGlmICghZWxlbWVudFJlZi5jdXJyZW50KSBlbGVtZW50UmVmLmN1cnJlbnQgPSBjcmVhdGVFbGVtZW50KHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgY29uc3QgcHJvcHNSZWYgPSB1c2VSZWYocHJvcHMpO1xuICAgICAgICBjb25zdCB7IGluc3RhbmNlICB9ID0gZWxlbWVudFJlZi5jdXJyZW50O1xuICAgICAgICB1c2VFZmZlY3QoZnVuY3Rpb24gdXBkYXRlRWxlbWVudFByb3BzKCkge1xuICAgICAgICAgICAgaWYgKHByb3BzUmVmLmN1cnJlbnQgIT09IHByb3BzKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRWxlbWVudChpbnN0YW5jZSwgcHJvcHMsIHByb3BzUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIHByb3BzUmVmLmN1cnJlbnQgPSBwcm9wcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW1xuICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgIGNvbnRleHRcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50UmVmO1xuICAgIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDTyxTQUFTQyxtQkFBbUJBLENBQUNDLFFBQVEsRUFBRUMsT0FBTyxFQUFFQyxTQUFTLEVBQUU7RUFDOUQsT0FBT0MsTUFBTSxDQUFDQyxNQUFNLENBQUM7SUFDakJKLFFBQVE7SUFDUkMsT0FBTztJQUNQQztFQUNKLENBQUMsQ0FBQztBQUNOO0FBQ08sU0FBU0csaUJBQWlCQSxDQUFDQyxhQUFhLEVBQUVDLGFBQWEsRUFBRTtFQUM1RCxJQUFJQSxhQUFhLElBQUksSUFBSSxFQUFFO0lBQ3ZCLE9BQU8sU0FBU0MsMEJBQTBCQSxDQUFDQyxLQUFLLEVBQUVSLE9BQU8sRUFBRTtNQUN2RCxNQUFNUyxVQUFVLEdBQUcsSUFBQUMsYUFBTSxHQUFFO01BQzNCLElBQUksQ0FBQ0QsVUFBVSxDQUFDRSxPQUFPLEVBQUVGLFVBQVUsQ0FBQ0UsT0FBTyxHQUFHTixhQUFhLENBQUNHLEtBQUssRUFBRVIsT0FBTyxDQUFDO01BQzNFLE9BQU9TLFVBQVU7SUFDckIsQ0FBQztFQUNMO0VBQ0EsT0FBTyxTQUFTRyx3QkFBd0JBLENBQUNKLEtBQUssRUFBRVIsT0FBTyxFQUFFO0lBQ3JELE1BQU1TLFVBQVUsR0FBRyxJQUFBQyxhQUFNLEdBQUU7SUFDM0IsSUFBSSxDQUFDRCxVQUFVLENBQUNFLE9BQU8sRUFBRUYsVUFBVSxDQUFDRSxPQUFPLEdBQUdOLGFBQWEsQ0FBQ0csS0FBSyxFQUFFUixPQUFPLENBQUM7SUFDM0UsTUFBTWEsUUFBUSxHQUFHLElBQUFILGFBQU0sRUFBQ0YsS0FBSyxDQUFDO0lBQzlCLE1BQU07TUFBRVQ7SUFBVSxDQUFDLEdBQUdVLFVBQVUsQ0FBQ0UsT0FBTztJQUN4QyxJQUFBRyxnQkFBUyxFQUFDLFNBQVNDLGtCQUFrQkEsQ0FBQSxFQUFHO01BQ3BDLElBQUlGLFFBQVEsQ0FBQ0YsT0FBTyxLQUFLSCxLQUFLLEVBQUU7UUFDNUJGLGFBQWEsQ0FBQ1AsUUFBUSxFQUFFUyxLQUFLLEVBQUVLLFFBQVEsQ0FBQ0YsT0FBTyxDQUFDO1FBQ2hERSxRQUFRLENBQUNGLE9BQU8sR0FBR0gsS0FBSztNQUM1QjtJQUNKLENBQUMsRUFBRSxDQUNDVCxRQUFRLEVBQ1JTLEtBQUssRUFDTFIsT0FBTyxDQUNWLENBQUM7SUFDRixPQUFPUyxVQUFVO0VBQ3JCLENBQUM7QUFDTCJ9