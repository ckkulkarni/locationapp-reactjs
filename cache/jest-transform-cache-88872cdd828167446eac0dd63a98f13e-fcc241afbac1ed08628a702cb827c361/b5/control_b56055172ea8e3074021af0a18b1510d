de0e672b46fd0f10426a2e0b8846d4ea
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createControlHook = createControlHook;
var _react = require("react");
var _context = require("./context.js");
function createControlHook(useElement) {
  return function useLeafletControl(props) {
    const context = (0, _context.useLeafletContext)();
    const elementRef = useElement(props, context);
    const {
      instance
    } = elementRef.current;
    const positionRef = (0, _react.useRef)(props.position);
    const {
      position
    } = props;
    (0, _react.useEffect)(function addControl() {
      instance.addTo(context.map);
      return function removeControl() {
        instance.remove();
      };
    }, [context.map, instance]);
    (0, _react.useEffect)(function updateControl() {
      if (position != null && position !== positionRef.current) {
        instance.setPosition(position);
        positionRef.current = position;
      }
    }, [instance, position]);
    return elementRef;
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2NvbnRleHQiLCJjcmVhdGVDb250cm9sSG9vayIsInVzZUVsZW1lbnQiLCJ1c2VMZWFmbGV0Q29udHJvbCIsInByb3BzIiwiY29udGV4dCIsInVzZUxlYWZsZXRDb250ZXh0IiwiZWxlbWVudFJlZiIsImluc3RhbmNlIiwiY3VycmVudCIsInBvc2l0aW9uUmVmIiwidXNlUmVmIiwicG9zaXRpb24iLCJ1c2VFZmZlY3QiLCJhZGRDb250cm9sIiwiYWRkVG8iLCJtYXAiLCJyZW1vdmVDb250cm9sIiwicmVtb3ZlIiwidXBkYXRlQ29udHJvbCIsInNldFBvc2l0aW9uIl0sInNvdXJjZXMiOlsiY29udHJvbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUxlYWZsZXRDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb250cm9sSG9vayh1c2VFbGVtZW50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVzZUxlYWZsZXRDb250cm9sKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB1c2VMZWFmbGV0Q29udGV4dCgpO1xuICAgICAgICBjb25zdCBlbGVtZW50UmVmID0gdXNlRWxlbWVudChwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHsgaW5zdGFuY2UgIH0gPSBlbGVtZW50UmVmLmN1cnJlbnQ7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uUmVmID0gdXNlUmVmKHByb3BzLnBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgeyBwb3NpdGlvbiAgfSA9IHByb3BzO1xuICAgICAgICB1c2VFZmZlY3QoZnVuY3Rpb24gYWRkQ29udHJvbCgpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmFkZFRvKGNvbnRleHQubWFwKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiByZW1vdmVDb250cm9sKCkge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLnJlbW92ZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwgW1xuICAgICAgICAgICAgY29udGV4dC5tYXAsXG4gICAgICAgICAgICBpbnN0YW5jZVxuICAgICAgICBdKTtcbiAgICAgICAgdXNlRWZmZWN0KGZ1bmN0aW9uIHVwZGF0ZUNvbnRyb2woKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gbnVsbCAmJiBwb3NpdGlvbiAhPT0gcG9zaXRpb25SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvblJlZi5jdXJyZW50ID0gcG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFtcbiAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgcG9zaXRpb25cbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50UmVmO1xuICAgIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNPLFNBQVNFLGlCQUFpQkEsQ0FBQ0MsVUFBVSxFQUFFO0VBQzFDLE9BQU8sU0FBU0MsaUJBQWlCQSxDQUFDQyxLQUFLLEVBQUU7SUFDckMsTUFBTUMsT0FBTyxHQUFHLElBQUFDLDBCQUFpQixHQUFFO0lBQ25DLE1BQU1DLFVBQVUsR0FBR0wsVUFBVSxDQUFDRSxLQUFLLEVBQUVDLE9BQU8sQ0FBQztJQUM3QyxNQUFNO01BQUVHO0lBQVUsQ0FBQyxHQUFHRCxVQUFVLENBQUNFLE9BQU87SUFDeEMsTUFBTUMsV0FBVyxHQUFHLElBQUFDLGFBQU0sRUFBQ1AsS0FBSyxDQUFDUSxRQUFRLENBQUM7SUFDMUMsTUFBTTtNQUFFQTtJQUFVLENBQUMsR0FBR1IsS0FBSztJQUMzQixJQUFBUyxnQkFBUyxFQUFDLFNBQVNDLFVBQVVBLENBQUEsRUFBRztNQUM1Qk4sUUFBUSxDQUFDTyxLQUFLLENBQUNWLE9BQU8sQ0FBQ1csR0FBRyxDQUFDO01BQzNCLE9BQU8sU0FBU0MsYUFBYUEsQ0FBQSxFQUFHO1FBQzVCVCxRQUFRLENBQUNVLE1BQU0sRUFBRTtNQUNyQixDQUFDO0lBQ0wsQ0FBQyxFQUFFLENBQ0NiLE9BQU8sQ0FBQ1csR0FBRyxFQUNYUixRQUFRLENBQ1gsQ0FBQztJQUNGLElBQUFLLGdCQUFTLEVBQUMsU0FBU00sYUFBYUEsQ0FBQSxFQUFHO01BQy9CLElBQUlQLFFBQVEsSUFBSSxJQUFJLElBQUlBLFFBQVEsS0FBS0YsV0FBVyxDQUFDRCxPQUFPLEVBQUU7UUFDdERELFFBQVEsQ0FBQ1ksV0FBVyxDQUFDUixRQUFRLENBQUM7UUFDOUJGLFdBQVcsQ0FBQ0QsT0FBTyxHQUFHRyxRQUFRO01BQ2xDO0lBQ0osQ0FBQyxFQUFFLENBQ0NKLFFBQVEsRUFDUkksUUFBUSxDQUNYLENBQUM7SUFDRixPQUFPTCxVQUFVO0VBQ3JCLENBQUM7QUFDTCJ9