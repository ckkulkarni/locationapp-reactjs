c0f72b2724f757fccec5b9c0e3dc65a6
"use strict";
'use client';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useMenu = useMenu;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var React = _interopRequireWildcard(require("react"));
var _utils = require("@mui/utils");
var _menuReducer = require("./menuReducer");
var _DropdownContext = require("../useDropdown/DropdownContext");
var _useList = require("../useList");
var _useDropdown = require("../useDropdown");
var _useCompound = require("../utils/useCompound");
var _combineHooksSlotProps = require("../utils/combineHooksSlotProps");
function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function (nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}
function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }
  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }
  var cache = _getRequireWildcardCache(nodeInterop);
  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }
  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }
  newObj.default = obj;
  if (cache) {
    cache.set(obj, newObj);
  }
  return newObj;
}
const FALLBACK_MENU_CONTEXT = {
  dispatch: () => {},
  popupId: '',
  registerPopup: () => {},
  registerTrigger: () => {},
  state: {
    open: true
  },
  triggerElement: null
};

/**
 *
 * Demos:
 *
 * - [Menu](https://mui.com/base-ui/react-menu/#hooks)
 *
 * API:
 *
 * - [useMenu API](https://mui.com/base-ui/react-menu/hooks-api/#use-menu)
 */
function useMenu(parameters = {}) {
  var _useId, _React$useContext;
  const {
    listboxRef: listboxRefProp,
    onItemsChange,
    id: idParam
  } = parameters;
  const rootRef = React.useRef(null);
  const handleRef = (0, _utils.unstable_useForkRef)(rootRef, listboxRefProp);
  const listboxId = (_useId = (0, _utils.unstable_useId)(idParam)) != null ? _useId : '';
  const {
    state: {
      open
    },
    dispatch: menuDispatch,
    triggerElement,
    registerPopup
  } = (_React$useContext = React.useContext(_DropdownContext.DropdownContext)) != null ? _React$useContext : FALLBACK_MENU_CONTEXT;

  // store the initial open state to prevent focus stealing
  // (the first menu items gets focued only when the menu is opened by the user)
  const isInitiallyOpen = React.useRef(open);
  const {
    subitems,
    contextValue: compoundComponentContextValue
  } = (0, _useCompound.useCompoundParent)();
  const subitemKeys = React.useMemo(() => Array.from(subitems.keys()), [subitems]);
  const getItemDomElement = React.useCallback(itemId => {
    var _subitems$get$ref$cur, _subitems$get;
    if (itemId == null) {
      return null;
    }
    return (_subitems$get$ref$cur = (_subitems$get = subitems.get(itemId)) == null ? void 0 : _subitems$get.ref.current) != null ? _subitems$get$ref$cur : null;
  }, [subitems]);
  const {
    dispatch: listDispatch,
    getRootProps: getListRootProps,
    contextValue: listContextValue,
    state: {
      highlightedValue
    },
    rootRef: mergedListRef
  } = (0, _useList.useList)({
    disabledItemsFocusable: true,
    focusManagement: 'DOM',
    getItemDomElement,
    getInitialState: () => ({
      selectedValues: [],
      highlightedValue: null
    }),
    isItemDisabled: id => {
      var _subitems$get2;
      return (subitems == null || (_subitems$get2 = subitems.get(id)) == null ? void 0 : _subitems$get2.disabled) || false;
    },
    items: subitemKeys,
    getItemAsString: id => {
      var _subitems$get3, _subitems$get4;
      return ((_subitems$get3 = subitems.get(id)) == null ? void 0 : _subitems$get3.label) || ((_subitems$get4 = subitems.get(id)) == null || (_subitems$get4 = _subitems$get4.ref.current) == null ? void 0 : _subitems$get4.innerText);
    },
    rootRef: handleRef,
    onItemsChange,
    reducerActionContext: {
      listboxRef: rootRef
    },
    selectionMode: 'none',
    stateReducer: _menuReducer.menuReducer
  });
  (0, _utils.unstable_useEnhancedEffect)(() => {
    registerPopup(listboxId);
  }, [listboxId, registerPopup]);
  React.useEffect(() => {
    if (open && highlightedValue === subitemKeys[0] && !isInitiallyOpen.current) {
      var _subitems$get5;
      (_subitems$get5 = subitems.get(subitemKeys[0])) == null || (_subitems$get5 = _subitems$get5.ref) == null || (_subitems$get5 = _subitems$get5.current) == null ? void 0 : _subitems$get5.focus();
    }
  }, [open, highlightedValue, subitems, subitemKeys]);
  React.useEffect(() => {
    var _rootRef$current;
    // set focus to the highlighted item (but prevent stealing focus from other elements on the page)
    if ((_rootRef$current = rootRef.current) != null && _rootRef$current.contains(document.activeElement) && highlightedValue !== null) {
      var _subitems$get6;
      subitems == null || (_subitems$get6 = subitems.get(highlightedValue)) == null || (_subitems$get6 = _subitems$get6.ref.current) == null ? void 0 : _subitems$get6.focus();
    }
  }, [highlightedValue, subitems]);
  const createHandleBlur = otherHandlers => event => {
    var _otherHandlers$onBlur, _rootRef$current2;
    (_otherHandlers$onBlur = otherHandlers.onBlur) == null ? void 0 : _otherHandlers$onBlur.call(otherHandlers, event);
    if (event.defaultMuiPrevented) {
      return;
    }
    if ((_rootRef$current2 = rootRef.current) != null && _rootRef$current2.contains(event.relatedTarget) || event.relatedTarget === triggerElement) {
      return;
    }
    menuDispatch({
      type: _useDropdown.DropdownActionTypes.blur,
      event
    });
  };
  const createHandleKeyDown = otherHandlers => event => {
    var _otherHandlers$onKeyD;
    (_otherHandlers$onKeyD = otherHandlers.onKeyDown) == null ? void 0 : _otherHandlers$onKeyD.call(otherHandlers, event);
    if (event.defaultMuiPrevented) {
      return;
    }
    if (event.key === 'Escape') {
      menuDispatch({
        type: _useDropdown.DropdownActionTypes.escapeKeyDown,
        event
      });
    }
  };
  const getOwnListboxHandlers = (otherHandlers = {}) => ({
    onBlur: createHandleBlur(otherHandlers),
    onKeyDown: createHandleKeyDown(otherHandlers)
  });
  const getListboxProps = (otherHandlers = {}) => {
    const getCombinedRootProps = (0, _combineHooksSlotProps.combineHooksSlotProps)(getOwnListboxHandlers, getListRootProps);
    return (0, _extends2.default)({}, getCombinedRootProps(otherHandlers), {
      id: listboxId,
      role: 'menu'
    });
  };
  React.useDebugValue({
    subitems,
    highlightedValue
  });
  return {
    contextValue: (0, _extends2.default)({}, compoundComponentContextValue, listContextValue),
    dispatch: listDispatch,
    getListboxProps,
    highlightedValue,
    listboxRef: mergedListRef,
    menuItems: subitems,
    open,
    triggerElement
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwidXNlTWVudSIsIl9leHRlbmRzMiIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfdXRpbHMiLCJfbWVudVJlZHVjZXIiLCJfRHJvcGRvd25Db250ZXh0IiwiX3VzZUxpc3QiLCJfdXNlRHJvcGRvd24iLCJfdXNlQ29tcG91bmQiLCJfY29tYmluZUhvb2tzU2xvdFByb3BzIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJGQUxMQkFDS19NRU5VX0NPTlRFWFQiLCJkaXNwYXRjaCIsInBvcHVwSWQiLCJyZWdpc3RlclBvcHVwIiwicmVnaXN0ZXJUcmlnZ2VyIiwic3RhdGUiLCJvcGVuIiwidHJpZ2dlckVsZW1lbnQiLCJwYXJhbWV0ZXJzIiwiX3VzZUlkIiwiX1JlYWN0JHVzZUNvbnRleHQiLCJsaXN0Ym94UmVmIiwibGlzdGJveFJlZlByb3AiLCJvbkl0ZW1zQ2hhbmdlIiwiaWQiLCJpZFBhcmFtIiwicm9vdFJlZiIsInVzZVJlZiIsImhhbmRsZVJlZiIsInVuc3RhYmxlX3VzZUZvcmtSZWYiLCJsaXN0Ym94SWQiLCJ1bnN0YWJsZV91c2VJZCIsIm1lbnVEaXNwYXRjaCIsInVzZUNvbnRleHQiLCJEcm9wZG93bkNvbnRleHQiLCJpc0luaXRpYWxseU9wZW4iLCJzdWJpdGVtcyIsImNvbnRleHRWYWx1ZSIsImNvbXBvdW5kQ29tcG9uZW50Q29udGV4dFZhbHVlIiwidXNlQ29tcG91bmRQYXJlbnQiLCJzdWJpdGVtS2V5cyIsInVzZU1lbW8iLCJBcnJheSIsImZyb20iLCJrZXlzIiwiZ2V0SXRlbURvbUVsZW1lbnQiLCJ1c2VDYWxsYmFjayIsIml0ZW1JZCIsIl9zdWJpdGVtcyRnZXQkcmVmJGN1ciIsIl9zdWJpdGVtcyRnZXQiLCJyZWYiLCJjdXJyZW50IiwibGlzdERpc3BhdGNoIiwiZ2V0Um9vdFByb3BzIiwiZ2V0TGlzdFJvb3RQcm9wcyIsImxpc3RDb250ZXh0VmFsdWUiLCJoaWdobGlnaHRlZFZhbHVlIiwibWVyZ2VkTGlzdFJlZiIsInVzZUxpc3QiLCJkaXNhYmxlZEl0ZW1zRm9jdXNhYmxlIiwiZm9jdXNNYW5hZ2VtZW50IiwiZ2V0SW5pdGlhbFN0YXRlIiwic2VsZWN0ZWRWYWx1ZXMiLCJpc0l0ZW1EaXNhYmxlZCIsIl9zdWJpdGVtcyRnZXQyIiwiZGlzYWJsZWQiLCJpdGVtcyIsImdldEl0ZW1Bc1N0cmluZyIsIl9zdWJpdGVtcyRnZXQzIiwiX3N1Yml0ZW1zJGdldDQiLCJsYWJlbCIsImlubmVyVGV4dCIsInJlZHVjZXJBY3Rpb25Db250ZXh0Iiwic2VsZWN0aW9uTW9kZSIsInN0YXRlUmVkdWNlciIsIm1lbnVSZWR1Y2VyIiwidW5zdGFibGVfdXNlRW5oYW5jZWRFZmZlY3QiLCJ1c2VFZmZlY3QiLCJfc3ViaXRlbXMkZ2V0NSIsImZvY3VzIiwiX3Jvb3RSZWYkY3VycmVudCIsImNvbnRhaW5zIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiX3N1Yml0ZW1zJGdldDYiLCJjcmVhdGVIYW5kbGVCbHVyIiwib3RoZXJIYW5kbGVycyIsImV2ZW50IiwiX290aGVySGFuZGxlcnMkb25CbHVyIiwiX3Jvb3RSZWYkY3VycmVudDIiLCJvbkJsdXIiLCJkZWZhdWx0TXVpUHJldmVudGVkIiwicmVsYXRlZFRhcmdldCIsInR5cGUiLCJEcm9wZG93bkFjdGlvblR5cGVzIiwiYmx1ciIsImNyZWF0ZUhhbmRsZUtleURvd24iLCJfb3RoZXJIYW5kbGVycyRvbktleUQiLCJvbktleURvd24iLCJlc2NhcGVLZXlEb3duIiwiZ2V0T3duTGlzdGJveEhhbmRsZXJzIiwiZ2V0TGlzdGJveFByb3BzIiwiZ2V0Q29tYmluZWRSb290UHJvcHMiLCJjb21iaW5lSG9va3NTbG90UHJvcHMiLCJyb2xlIiwidXNlRGVidWdWYWx1ZSIsIm1lbnVJdGVtcyJdLCJzb3VyY2VzIjpbInVzZU1lbnUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4ndXNlIGNsaWVudCc7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMudXNlTWVudSA9IHVzZU1lbnU7XG52YXIgX2V4dGVuZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCIpKTtcbnZhciBSZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIkBtdWkvdXRpbHNcIik7XG52YXIgX21lbnVSZWR1Y2VyID0gcmVxdWlyZShcIi4vbWVudVJlZHVjZXJcIik7XG52YXIgX0Ryb3Bkb3duQ29udGV4dCA9IHJlcXVpcmUoXCIuLi91c2VEcm9wZG93bi9Ecm9wZG93bkNvbnRleHRcIik7XG52YXIgX3VzZUxpc3QgPSByZXF1aXJlKFwiLi4vdXNlTGlzdFwiKTtcbnZhciBfdXNlRHJvcGRvd24gPSByZXF1aXJlKFwiLi4vdXNlRHJvcGRvd25cIik7XG52YXIgX3VzZUNvbXBvdW5kID0gcmVxdWlyZShcIi4uL3V0aWxzL3VzZUNvbXBvdW5kXCIpO1xudmFyIF9jb21iaW5lSG9va3NTbG90UHJvcHMgPSByZXF1aXJlKFwiLi4vdXRpbHMvY29tYmluZUhvb2tzU2xvdFByb3BzXCIpO1xuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKSB7IGlmICh0eXBlb2YgV2Vha01hcCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbnVsbDsgdmFyIGNhY2hlQmFiZWxJbnRlcm9wID0gbmV3IFdlYWtNYXAoKTsgdmFyIGNhY2hlTm9kZUludGVyb3AgPSBuZXcgV2Vha01hcCgpOyByZXR1cm4gKF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIChub2RlSW50ZXJvcCkgeyByZXR1cm4gbm9kZUludGVyb3AgPyBjYWNoZU5vZGVJbnRlcm9wIDogY2FjaGVCYWJlbEludGVyb3A7IH0pKG5vZGVJbnRlcm9wKTsgfVxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqLCBub2RlSW50ZXJvcCkgeyBpZiAoIW5vZGVJbnRlcm9wICYmIG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHsgcmV0dXJuIHsgZGVmYXVsdDogb2JqIH07IH0gdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoa2V5ICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gaGFzUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsOyBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyBpZiAoY2FjaGUpIHsgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTsgfSByZXR1cm4gbmV3T2JqOyB9XG5jb25zdCBGQUxMQkFDS19NRU5VX0NPTlRFWFQgPSB7XG4gIGRpc3BhdGNoOiAoKSA9PiB7fSxcbiAgcG9wdXBJZDogJycsXG4gIHJlZ2lzdGVyUG9wdXA6ICgpID0+IHt9LFxuICByZWdpc3RlclRyaWdnZXI6ICgpID0+IHt9LFxuICBzdGF0ZToge1xuICAgIG9wZW46IHRydWVcbiAgfSxcbiAgdHJpZ2dlckVsZW1lbnQ6IG51bGxcbn07XG5cbi8qKlxuICpcbiAqIERlbW9zOlxuICpcbiAqIC0gW01lbnVdKGh0dHBzOi8vbXVpLmNvbS9iYXNlLXVpL3JlYWN0LW1lbnUvI2hvb2tzKVxuICpcbiAqIEFQSTpcbiAqXG4gKiAtIFt1c2VNZW51IEFQSV0oaHR0cHM6Ly9tdWkuY29tL2Jhc2UtdWkvcmVhY3QtbWVudS9ob29rcy1hcGkvI3VzZS1tZW51KVxuICovXG5mdW5jdGlvbiB1c2VNZW51KHBhcmFtZXRlcnMgPSB7fSkge1xuICB2YXIgX3VzZUlkLCBfUmVhY3QkdXNlQ29udGV4dDtcbiAgY29uc3Qge1xuICAgIGxpc3Rib3hSZWY6IGxpc3Rib3hSZWZQcm9wLFxuICAgIG9uSXRlbXNDaGFuZ2UsXG4gICAgaWQ6IGlkUGFyYW1cbiAgfSA9IHBhcmFtZXRlcnM7XG4gIGNvbnN0IHJvb3RSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IGhhbmRsZVJlZiA9ICgwLCBfdXRpbHMudW5zdGFibGVfdXNlRm9ya1JlZikocm9vdFJlZiwgbGlzdGJveFJlZlByb3ApO1xuICBjb25zdCBsaXN0Ym94SWQgPSAoX3VzZUlkID0gKDAsIF91dGlscy51bnN0YWJsZV91c2VJZCkoaWRQYXJhbSkpICE9IG51bGwgPyBfdXNlSWQgOiAnJztcbiAgY29uc3Qge1xuICAgIHN0YXRlOiB7XG4gICAgICBvcGVuXG4gICAgfSxcbiAgICBkaXNwYXRjaDogbWVudURpc3BhdGNoLFxuICAgIHRyaWdnZXJFbGVtZW50LFxuICAgIHJlZ2lzdGVyUG9wdXBcbiAgfSA9IChfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoX0Ryb3Bkb3duQ29udGV4dC5Ecm9wZG93bkNvbnRleHQpKSAhPSBudWxsID8gX1JlYWN0JHVzZUNvbnRleHQgOiBGQUxMQkFDS19NRU5VX0NPTlRFWFQ7XG5cbiAgLy8gc3RvcmUgdGhlIGluaXRpYWwgb3BlbiBzdGF0ZSB0byBwcmV2ZW50IGZvY3VzIHN0ZWFsaW5nXG4gIC8vICh0aGUgZmlyc3QgbWVudSBpdGVtcyBnZXRzIGZvY3VlZCBvbmx5IHdoZW4gdGhlIG1lbnUgaXMgb3BlbmVkIGJ5IHRoZSB1c2VyKVxuICBjb25zdCBpc0luaXRpYWxseU9wZW4gPSBSZWFjdC51c2VSZWYob3Blbik7XG4gIGNvbnN0IHtcbiAgICBzdWJpdGVtcyxcbiAgICBjb250ZXh0VmFsdWU6IGNvbXBvdW5kQ29tcG9uZW50Q29udGV4dFZhbHVlXG4gIH0gPSAoMCwgX3VzZUNvbXBvdW5kLnVzZUNvbXBvdW5kUGFyZW50KSgpO1xuICBjb25zdCBzdWJpdGVtS2V5cyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gQXJyYXkuZnJvbShzdWJpdGVtcy5rZXlzKCkpLCBbc3ViaXRlbXNdKTtcbiAgY29uc3QgZ2V0SXRlbURvbUVsZW1lbnQgPSBSZWFjdC51c2VDYWxsYmFjayhpdGVtSWQgPT4ge1xuICAgIHZhciBfc3ViaXRlbXMkZ2V0JHJlZiRjdXIsIF9zdWJpdGVtcyRnZXQ7XG4gICAgaWYgKGl0ZW1JZCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIChfc3ViaXRlbXMkZ2V0JHJlZiRjdXIgPSAoX3N1Yml0ZW1zJGdldCA9IHN1Yml0ZW1zLmdldChpdGVtSWQpKSA9PSBudWxsID8gdm9pZCAwIDogX3N1Yml0ZW1zJGdldC5yZWYuY3VycmVudCkgIT0gbnVsbCA/IF9zdWJpdGVtcyRnZXQkcmVmJGN1ciA6IG51bGw7XG4gIH0sIFtzdWJpdGVtc10pO1xuICBjb25zdCB7XG4gICAgZGlzcGF0Y2g6IGxpc3REaXNwYXRjaCxcbiAgICBnZXRSb290UHJvcHM6IGdldExpc3RSb290UHJvcHMsXG4gICAgY29udGV4dFZhbHVlOiBsaXN0Q29udGV4dFZhbHVlLFxuICAgIHN0YXRlOiB7XG4gICAgICBoaWdobGlnaHRlZFZhbHVlXG4gICAgfSxcbiAgICByb290UmVmOiBtZXJnZWRMaXN0UmVmXG4gIH0gPSAoMCwgX3VzZUxpc3QudXNlTGlzdCkoe1xuICAgIGRpc2FibGVkSXRlbXNGb2N1c2FibGU6IHRydWUsXG4gICAgZm9jdXNNYW5hZ2VtZW50OiAnRE9NJyxcbiAgICBnZXRJdGVtRG9tRWxlbWVudCxcbiAgICBnZXRJbml0aWFsU3RhdGU6ICgpID0+ICh7XG4gICAgICBzZWxlY3RlZFZhbHVlczogW10sXG4gICAgICBoaWdobGlnaHRlZFZhbHVlOiBudWxsXG4gICAgfSksXG4gICAgaXNJdGVtRGlzYWJsZWQ6IGlkID0+IHtcbiAgICAgIHZhciBfc3ViaXRlbXMkZ2V0MjtcbiAgICAgIHJldHVybiAoc3ViaXRlbXMgPT0gbnVsbCB8fCAoX3N1Yml0ZW1zJGdldDIgPSBzdWJpdGVtcy5nZXQoaWQpKSA9PSBudWxsID8gdm9pZCAwIDogX3N1Yml0ZW1zJGdldDIuZGlzYWJsZWQpIHx8IGZhbHNlO1xuICAgIH0sXG4gICAgaXRlbXM6IHN1Yml0ZW1LZXlzLFxuICAgIGdldEl0ZW1Bc1N0cmluZzogaWQgPT4ge1xuICAgICAgdmFyIF9zdWJpdGVtcyRnZXQzLCBfc3ViaXRlbXMkZ2V0NDtcbiAgICAgIHJldHVybiAoKF9zdWJpdGVtcyRnZXQzID0gc3ViaXRlbXMuZ2V0KGlkKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9zdWJpdGVtcyRnZXQzLmxhYmVsKSB8fCAoKF9zdWJpdGVtcyRnZXQ0ID0gc3ViaXRlbXMuZ2V0KGlkKSkgPT0gbnVsbCB8fCAoX3N1Yml0ZW1zJGdldDQgPSBfc3ViaXRlbXMkZ2V0NC5yZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9zdWJpdGVtcyRnZXQ0LmlubmVyVGV4dCk7XG4gICAgfSxcbiAgICByb290UmVmOiBoYW5kbGVSZWYsXG4gICAgb25JdGVtc0NoYW5nZSxcbiAgICByZWR1Y2VyQWN0aW9uQ29udGV4dDoge1xuICAgICAgbGlzdGJveFJlZjogcm9vdFJlZlxuICAgIH0sXG4gICAgc2VsZWN0aW9uTW9kZTogJ25vbmUnLFxuICAgIHN0YXRlUmVkdWNlcjogX21lbnVSZWR1Y2VyLm1lbnVSZWR1Y2VyXG4gIH0pO1xuICAoMCwgX3V0aWxzLnVuc3RhYmxlX3VzZUVuaGFuY2VkRWZmZWN0KSgoKSA9PiB7XG4gICAgcmVnaXN0ZXJQb3B1cChsaXN0Ym94SWQpO1xuICB9LCBbbGlzdGJveElkLCByZWdpc3RlclBvcHVwXSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9wZW4gJiYgaGlnaGxpZ2h0ZWRWYWx1ZSA9PT0gc3ViaXRlbUtleXNbMF0gJiYgIWlzSW5pdGlhbGx5T3Blbi5jdXJyZW50KSB7XG4gICAgICB2YXIgX3N1Yml0ZW1zJGdldDU7XG4gICAgICAoX3N1Yml0ZW1zJGdldDUgPSBzdWJpdGVtcy5nZXQoc3ViaXRlbUtleXNbMF0pKSA9PSBudWxsIHx8IChfc3ViaXRlbXMkZ2V0NSA9IF9zdWJpdGVtcyRnZXQ1LnJlZikgPT0gbnVsbCB8fCAoX3N1Yml0ZW1zJGdldDUgPSBfc3ViaXRlbXMkZ2V0NS5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX3N1Yml0ZW1zJGdldDUuZm9jdXMoKTtcbiAgICB9XG4gIH0sIFtvcGVuLCBoaWdobGlnaHRlZFZhbHVlLCBzdWJpdGVtcywgc3ViaXRlbUtleXNdKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgX3Jvb3RSZWYkY3VycmVudDtcbiAgICAvLyBzZXQgZm9jdXMgdG8gdGhlIGhpZ2hsaWdodGVkIGl0ZW0gKGJ1dCBwcmV2ZW50IHN0ZWFsaW5nIGZvY3VzIGZyb20gb3RoZXIgZWxlbWVudHMgb24gdGhlIHBhZ2UpXG4gICAgaWYgKChfcm9vdFJlZiRjdXJyZW50ID0gcm9vdFJlZi5jdXJyZW50KSAhPSBudWxsICYmIF9yb290UmVmJGN1cnJlbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgJiYgaGlnaGxpZ2h0ZWRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdmFyIF9zdWJpdGVtcyRnZXQ2O1xuICAgICAgc3ViaXRlbXMgPT0gbnVsbCB8fCAoX3N1Yml0ZW1zJGdldDYgPSBzdWJpdGVtcy5nZXQoaGlnaGxpZ2h0ZWRWYWx1ZSkpID09IG51bGwgfHwgKF9zdWJpdGVtcyRnZXQ2ID0gX3N1Yml0ZW1zJGdldDYucmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfc3ViaXRlbXMkZ2V0Ni5mb2N1cygpO1xuICAgIH1cbiAgfSwgW2hpZ2hsaWdodGVkVmFsdWUsIHN1Yml0ZW1zXSk7XG4gIGNvbnN0IGNyZWF0ZUhhbmRsZUJsdXIgPSBvdGhlckhhbmRsZXJzID0+IGV2ZW50ID0+IHtcbiAgICB2YXIgX290aGVySGFuZGxlcnMkb25CbHVyLCBfcm9vdFJlZiRjdXJyZW50MjtcbiAgICAoX290aGVySGFuZGxlcnMkb25CbHVyID0gb3RoZXJIYW5kbGVycy5vbkJsdXIpID09IG51bGwgPyB2b2lkIDAgOiBfb3RoZXJIYW5kbGVycyRvbkJsdXIuY2FsbChvdGhlckhhbmRsZXJzLCBldmVudCk7XG4gICAgaWYgKGV2ZW50LmRlZmF1bHRNdWlQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKChfcm9vdFJlZiRjdXJyZW50MiA9IHJvb3RSZWYuY3VycmVudCkgIT0gbnVsbCAmJiBfcm9vdFJlZiRjdXJyZW50Mi5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KSB8fCBldmVudC5yZWxhdGVkVGFyZ2V0ID09PSB0cmlnZ2VyRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtZW51RGlzcGF0Y2goe1xuICAgICAgdHlwZTogX3VzZURyb3Bkb3duLkRyb3Bkb3duQWN0aW9uVHlwZXMuYmx1cixcbiAgICAgIGV2ZW50XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZUhhbmRsZUtleURvd24gPSBvdGhlckhhbmRsZXJzID0+IGV2ZW50ID0+IHtcbiAgICB2YXIgX290aGVySGFuZGxlcnMkb25LZXlEO1xuICAgIChfb3RoZXJIYW5kbGVycyRvbktleUQgPSBvdGhlckhhbmRsZXJzLm9uS2V5RG93bikgPT0gbnVsbCA/IHZvaWQgMCA6IF9vdGhlckhhbmRsZXJzJG9uS2V5RC5jYWxsKG90aGVySGFuZGxlcnMsIGV2ZW50KTtcbiAgICBpZiAoZXZlbnQuZGVmYXVsdE11aVByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgbWVudURpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogX3VzZURyb3Bkb3duLkRyb3Bkb3duQWN0aW9uVHlwZXMuZXNjYXBlS2V5RG93bixcbiAgICAgICAgZXZlbnRcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgZ2V0T3duTGlzdGJveEhhbmRsZXJzID0gKG90aGVySGFuZGxlcnMgPSB7fSkgPT4gKHtcbiAgICBvbkJsdXI6IGNyZWF0ZUhhbmRsZUJsdXIob3RoZXJIYW5kbGVycyksXG4gICAgb25LZXlEb3duOiBjcmVhdGVIYW5kbGVLZXlEb3duKG90aGVySGFuZGxlcnMpXG4gIH0pO1xuICBjb25zdCBnZXRMaXN0Ym94UHJvcHMgPSAob3RoZXJIYW5kbGVycyA9IHt9KSA9PiB7XG4gICAgY29uc3QgZ2V0Q29tYmluZWRSb290UHJvcHMgPSAoMCwgX2NvbWJpbmVIb29rc1Nsb3RQcm9wcy5jb21iaW5lSG9va3NTbG90UHJvcHMpKGdldE93bkxpc3Rib3hIYW5kbGVycywgZ2V0TGlzdFJvb3RQcm9wcyk7XG4gICAgcmV0dXJuICgwLCBfZXh0ZW5kczIuZGVmYXVsdCkoe30sIGdldENvbWJpbmVkUm9vdFByb3BzKG90aGVySGFuZGxlcnMpLCB7XG4gICAgICBpZDogbGlzdGJveElkLFxuICAgICAgcm9sZTogJ21lbnUnXG4gICAgfSk7XG4gIH07XG4gIFJlYWN0LnVzZURlYnVnVmFsdWUoe1xuICAgIHN1Yml0ZW1zLFxuICAgIGhpZ2hsaWdodGVkVmFsdWVcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgY29udGV4dFZhbHVlOiAoMCwgX2V4dGVuZHMyLmRlZmF1bHQpKHt9LCBjb21wb3VuZENvbXBvbmVudENvbnRleHRWYWx1ZSwgbGlzdENvbnRleHRWYWx1ZSksXG4gICAgZGlzcGF0Y2g6IGxpc3REaXNwYXRjaCxcbiAgICBnZXRMaXN0Ym94UHJvcHMsXG4gICAgaGlnaGxpZ2h0ZWRWYWx1ZSxcbiAgICBsaXN0Ym94UmVmOiBtZXJnZWRMaXN0UmVmLFxuICAgIG1lbnVJdGVtczogc3ViaXRlbXMsXG4gICAgb3BlbixcbiAgICB0cmlnZ2VyRWxlbWVudFxuICB9O1xufSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTtBQUNaLFlBQVk7O0FBRVosSUFBSUEsc0JBQXNCLEdBQUdDLE9BQU8sQ0FBQyw4Q0FBOEMsQ0FBQztBQUNwRkMsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFDM0NDLEtBQUssRUFBRTtBQUNULENBQUMsQ0FBQztBQUNGRCxPQUFPLENBQUNFLE9BQU8sR0FBR0EsT0FBTztBQUN6QixJQUFJQyxTQUFTLEdBQUdQLHNCQUFzQixDQUFDQyxPQUFPLENBQUMsZ0NBQWdDLENB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